/**
 * @file example_external_context_usage.hpp
 * @brief ĞŸĞĞ›ĞĞ«Ğ™ ĞŸĞ Ğ˜ĞœĞ•Ğ  Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ DrvGPU Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼ OpenCL ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
 * 
 * Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ™:
 * Ğ£ Ğ²Ğ°Ñ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ OpenCL ĞºĞ¾Ğ´ (ĞºĞ»Ğ°ÑÑ YourExistingOpenCL).
 * Ğ’Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ DrvGPU Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ.
 * 
 * âœ… ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ: Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ owns_resources_
 * âœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ: Ğ£Ğ±Ñ€Ğ°Ğ½Ñ‹ Ğ½ĞµÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ API
 * 
 * @author DrvGPU Team
 * @date 2026-02-02
 */

 #include "DrvGPU/backends/opencl/opencl_backend_external.hpp"
 #include "DrvGPU/drv_gpu.hpp"
 #include <iostream>
 #include <vector>
 #include <CL/cl.h>
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 // Ğ¡Ğ˜ĞœĞ£Ğ›Ğ¯Ğ¦Ğ˜Ğ¯ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ OpenCL ĞºĞ»Ğ°ÑÑĞ°
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 
 class YourExistingOpenCL {
 public:
     YourExistingOpenCL() {
         // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ OpenCL (Ğ²Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´)
         InitializeOpenCL();
         // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±ÑƒÑ„ĞµÑ€Ğ¾Ğ² (Ğ²Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´)
         CreateBuffers();
     }
     
     ~YourExistingOpenCL() {
         // ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° (Ğ²Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´)
         CleanupBuffers();
         CleanupOpenCL();
     }
     
     // Ğ“ĞµÑ‚Ñ‚ĞµÑ€Ñ‹ Ğ´Ğ»Ñ OpenCL Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ²
     cl_context GetContext() const { return context_; }
     cl_device_id GetDevice() const { return device_; }
     cl_command_queue GetQueue() const { return queue_; }
     cl_mem GetDataBuffer() const { return data_buffer_; }
 
 private:
     cl_platform_id platform_;
     cl_device_id device_;
     cl_context context_;
     cl_command_queue queue_;
     cl_mem data_buffer_;  // Ğ’Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ Ğ±ÑƒÑ„ĞµÑ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
     
     void InitializeOpenCL() {
         // Ğ’Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ OpenCL
         cl_int err;
         
         // 1. Platform
         err = clGetPlatformIDs(1, &platform_, nullptr);
         if (err != CL_SUCCESS)
             throw std::runtime_error("Platform init failed");
         
         // 2. Device
         err = clGetDeviceIDs(platform_, CL_DEVICE_TYPE_GPU, 1, &device_, nullptr);
         if (err != CL_SUCCESS)
             throw std::runtime_error("Device init failed");
         
         // 3. Context
         context_ = clCreateContext(nullptr, 1, &device_, nullptr, nullptr, &err);
         if (err != CL_SUCCESS)
             throw std::runtime_error("Context creation failed");
         
         // 4. Queue
         #ifdef CL_VERSION_2_0
             cl_queue_properties props[] = {0};
             queue_ = clCreateCommandQueueWithProperties(context_, device_, props, &err);
         #else
             queue_ = clCreateCommandQueue(context_, device_, 0, &err);
         #endif
         
         if (err != CL_SUCCESS)
             throw std::runtime_error("Queue creation failed");
         
         std::cout << "âœ… YourExistingOpenCL: Initialized\n";
     }
     
     void CreateBuffers() {
         cl_int err;
         
         // Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ±ÑƒÑ„ĞµÑ€ Ğ½Ğ° 1024 float ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°
         size_t buffer_size = 1024 * sizeof(float);
         data_buffer_ = clCreateBuffer(
             context_,
             CL_MEM_READ_WRITE,
             buffer_size,
             nullptr,
             &err);
         
         if (err != CL_SUCCESS)
             throw std::runtime_error("Buffer creation failed");
         
         // Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ±ÑƒÑ„ĞµÑ€ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
         std::vector<float> test_data(1024);
         for (size_t i = 0; i < test_data.size(); ++i) {
             test_data[i] = static_cast<float>(i);
         }
         
         err = clEnqueueWriteBuffer(
             queue_,
             data_buffer_,
             CL_TRUE,
             0,
             buffer_size,
             test_data.data(),
             0,
             nullptr,
             nullptr);
         
         if (err != CL_SUCCESS)
             throw std::runtime_error("Buffer write failed");
         
         std::cout << "âœ… YourExistingOpenCL: Created and filled data_buffer\n";
     }
     
     void CleanupBuffers() {
         if (data_buffer_)
             clReleaseMemObject(data_buffer_);
     }
     
     void CleanupOpenCL() {
         if (queue_)
             clReleaseCommandQueue(queue_);
         if (context_)
             clReleaseContext(context_);
         if (device_)
             clReleaseDevice(device_);
         
         std::cout << "âœ… YourExistingOpenCL: Cleaned up (released context/queue)\n";
     }
 };
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 // ĞŸĞ Ğ˜ĞœĞ•Ğ  1: Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 
 void Example1_BasicExternalContext() {
     std::cout << "\n" << std::string(80, '=') << "\n";
     std::cout << "EXAMPLE 1: Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°\n";
     std::cout << std::string(80, '=') << "\n\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 1: Ğ£ Ğ²Ğ°Ñ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ OpenCL ĞºĞ¾Ğ´
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "ğŸ“Œ Ğ¨ĞĞ“ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ²Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ OpenCL ĞºĞ»Ğ°ÑÑ...\n";
     YourExistingOpenCL your_opencl;
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 2: Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ DrvGPU backend (Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€)
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“Œ Ğ¨ĞĞ“ 2: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ OpenCLBackendExternal...\n";
     auto backend = std::make_unique<drv_gpu_lib::OpenCLBackendExternal>();
     
     std::cout << "   âœ… Backend ÑĞ¾Ğ·Ğ´Ğ°Ğ½ (owns_resources = false Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 3: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ DrvGPU Ñ Ğ’ĞĞ¨Ğ˜Ğœ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“Œ Ğ¨ĞĞ“ 3: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¸Ğ· Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°...\n";
     backend->InitializeFromExternalContext(
         your_opencl.GetContext(),   // Ğ’Ğ°Ñˆ context
         your_opencl.GetDevice(),    // Ğ’Ğ°Ñˆ device
         your_opencl.GetQueue()      // Ğ’Ğ°Ñˆ queue
     );
     
     std::cout << "   âœ… DrvGPU ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ OpenCL!\n";
     std::cout << "   âœ… owns_resources = " << (backend->OwnsResources() ? "true" : "false") << "\n";
     std::cout << "   Device: " << backend->GetDeviceName() << "\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 4: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ DrvGPU API
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“Œ Ğ¨ĞĞ“ 4: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ DrvGPU API...\n";
     auto device_info = backend->GetDeviceInfo();
     std::cout << "   Vendor: " << device_info.vendor << "\n";
     std::cout << "   OpenCL Version: " << device_info.opencl_version << "\n";
     std::cout << "   Global Memory: " << (device_info.global_memory_size / (1024*1024)) << " MB\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 5: Backend ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“Œ Ğ¨ĞĞ“ 5: Ğ£Ğ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµĞ¼ backend...\n";
     backend.reset();  // Ğ’Ñ‹Ğ·Ğ¾Ğ²ĞµÑ‚ Ğ´ĞµÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€ â†’ Cleanup()
     
     std::cout << "   âœ… Backend ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶ĞµĞ½\n";
     std::cout << "   âš ï¸  Cleanup() ÑƒĞ²Ğ¸Ğ´ĞµĞ» owns_resources = false\n";
     std::cout << "   âš ï¸  Ğ’Ğ°Ñˆ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚/queue ĞĞ• Ğ±Ñ‹Ğ»Ğ¸ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´ĞµĞ½Ñ‹!\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // Ğ¨ĞĞ“ 6: Ğ’Ğ°Ñˆ OpenCL ĞºĞ¾Ğ´ Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“Œ Ğ¨ĞĞ“ 6: Ğ’Ğ°Ñˆ OpenCL ĞºĞ¾Ğ´ Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚...\n";
     std::cout << "   Context: " << (your_opencl.GetContext() ? "OK âœ…" : "NULL âŒ") << "\n";
     std::cout << "   Queue: " << (your_opencl.GetQueue() ? "OK âœ…" : "NULL âŒ") << "\n";
     
     std::cout << "\nğŸ‰ YourExistingOpenCL Ğ´ĞµÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ¸Ñ‚ Ñ€ĞµÑÑƒÑ€ÑÑ‹ ÑĞ°Ğ¼!\n";
     
     // ~YourExistingOpenCL() Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½ Ğ·Ğ´ĞµÑÑŒ â†’ CleanupOpenCL() â†’ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ¸Ñ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
 }
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 // ĞŸĞ Ğ˜ĞœĞ•Ğ  2: Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ cl_mem Ğ±ÑƒÑ„ĞµÑ€Ğ°Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· IBackend API
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 
 void Example2_WorkingWithExternalBuffers() {
     std::cout << "\n" << std::string(80, '=') << "\n";
     std::cout << "EXAMPLE 2: Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ cl_mem Ğ±ÑƒÑ„ĞµÑ€Ğ°Ğ¼Ğ¸\n";
     std::cout << std::string(80, '=') << "\n\n";
     
     // Ğ¨ĞĞ“ 1: Ğ’Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ OpenCL ĞºĞ¾Ğ´
     YourExistingOpenCL your_opencl;
     
     // Ğ¨ĞĞ“ 2: DrvGPU backend Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼
     auto backend = std::make_unique<drv_gpu_lib::OpenCLBackendExternal>();
     backend->InitializeFromExternalContext(
         your_opencl.GetContext(),
         your_opencl.GetDevice(),
         your_opencl.GetQueue()
     );
     
     std::cout << "âœ… Backend initialized (owns_resources = " 
               << (backend->OwnsResources() ? "true" : "false") << ")\n";
     
     // Ğ¨ĞĞ“ 3: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ²Ğ°Ñˆ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ cl_mem Ğ±ÑƒÑ„ĞµÑ€
     cl_mem your_buffer = your_opencl.GetDataBuffer();
     size_t buffer_size = 1024 * sizeof(float);
     
     std::cout << "âœ… Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµĞ¼ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ cl_mem Ğ±ÑƒÑ„ĞµÑ€Ğ¾Ğ¼ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // USE CASE 1: Ğ—ĞĞ“Ğ Ğ£Ğ—Ğ˜Ğ¢Ğ¬ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ GPU -> Host
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“¥ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ GPU (Ñ‡ĞµÑ€ĞµĞ· IBackend::MemcpyDeviceToHost)...\n";
     std::vector<float> data_from_gpu(1024);
     
     backend->MemcpyDeviceToHost(
         data_from_gpu.data(),      // dst (host)
         your_buffer,               // src (device)
         buffer_size
     );
     
     std::cout << "   ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¾ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²: " << data_from_gpu.size() << "\n";
     std::cout << "   ĞŸĞµÑ€Ğ²Ñ‹Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²: ";
     for (size_t i = 0; i < 5; ++i) {
         std::cout << data_from_gpu[i] << " ";
     }
     std::cout << "\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // USE CASE 2: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° CPU
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ”„ ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° CPU (ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° 2)...\n";
     for (auto &val : data_from_gpu) {
         val *= 2.0f;
     }
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // USE CASE 3: Ğ’Ğ«Ğ“Ğ Ğ£Ğ—Ğ˜Ğ¢Ğ¬ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Host -> GPU
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“¤ Ğ’Ğ«Ğ“Ğ Ğ£Ğ—ĞšĞ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° GPU (Ñ‡ĞµÑ€ĞµĞ· IBackend::MemcpyHostToDevice)...\n";
     
     backend->MemcpyHostToDevice(
         your_buffer,               // dst (device)
         data_from_gpu.data(),      // src (host)
         buffer_size
     );
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // USE CASE 4: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ” ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° (Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ½Ğ¾Ğ²Ğ°)...\n";
     std::vector<float> result(1024);
     
     backend->MemcpyDeviceToHost(
         result.data(),
         your_buffer,
         buffer_size
     );
     
     std::cout << "   ĞŸĞµÑ€Ğ²Ñ‹Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸: ";
     for (size_t i = 0; i < 5; ++i) {
         std::cout << result[i] << " ";
     }
     std::cout << "\n";
     
     std::cout << "\nâœ… Ğ¦Ğ¸ĞºĞ» Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ -> ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ -> Ğ’Ğ«Ğ“Ğ Ğ£Ğ—ĞšĞ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½!\n";
     
     // Ğ£Ğ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ:
     // 1. backend ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ â†’ ĞĞ• Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ (owns_resources = false)
     // 2. your_opencl ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ â†’ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ˜ cl_mem âœ…
 }
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 // ĞŸĞ Ğ˜ĞœĞ•Ğ  3: ĞŸÑ€ÑĞ¼Ñ‹Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ±ÑƒÑ„ĞµÑ€Ğ°Ğ¼Ğ¸
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 
 void Example3_DirectBufferUtilities() {
     std::cout << "\n" << std::string(80, '=') << "\n";
     std::cout << "EXAMPLE 3: ĞŸÑ€ÑĞ¼Ñ‹Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ±ÑƒÑ„ĞµÑ€Ğ°Ğ¼Ğ¸\n";
     std::cout << std::string(80, '=') << "\n\n";
     
     YourExistingOpenCL your_opencl;
     
     auto backend = std::make_unique<drv_gpu_lib::OpenCLBackendExternal>();
     backend->InitializeFromExternalContext(
         your_opencl.GetContext(),
         your_opencl.GetDevice(),
         your_opencl.GetQueue()
     );
     
     cl_mem your_buffer = your_opencl.GetDataBuffer();
     size_t buffer_size = 1024 * sizeof(float);
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // ĞœĞµÑ‚Ğ¾Ğ´ 1: ĞŸÑ€ÑĞ¼Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ñ‡ĞµÑ€ĞµĞ· backend API
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“¤ ĞŸÑ€ÑĞ¼Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ñ‡ĞµÑ€ĞµĞ· MemcpyHostToDevice()...\n";
     std::vector<float> new_data(1024, 99.0f);
     
     backend->MemcpyHostToDevice(
         your_buffer,
         new_data.data(),
         buffer_size
     );
     
     std::cout << "   Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾ " << new_data.size() << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // ĞœĞµÑ‚Ğ¾Ğ´ 2: ĞŸÑ€ÑĞ¼Ğ¾Ğµ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· backend API
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ“¥ ĞŸÑ€ÑĞ¼Ğ¾Ğµ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· MemcpyDeviceToHost()...\n";
     std::vector<float> read_data(1024);
     
     backend->MemcpyDeviceToHost(
         read_data.data(),
         your_buffer,
         buffer_size
     );
     
     std::cout << "   ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¾ " << read_data.size() << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²\n";
     std::cout << "   Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°: " << read_data[0] << "\n";
     
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     // ĞœĞµÑ‚Ğ¾Ğ´ 3: ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Device -> Device
     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     std::cout << "\nğŸ”„ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±ÑƒÑ„ĞµÑ€Ğ° GPU -> GPU...\n";
     
     // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ±ÑƒÑ„ĞµÑ€ Ğ² Ğ²Ğ°ÑˆĞµĞ¼ OpenCL ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğµ
     cl_int err;
     cl_mem temp_buffer = clCreateBuffer(
         your_opencl.GetContext(),
         CL_MEM_READ_WRITE,
         buffer_size,
         nullptr,
         &err
     );
     
     if (err == CL_SUCCESS && temp_buffer) {
         // ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ²Ğ°Ñˆ Ğ±ÑƒÑ„ĞµÑ€ Ğ² Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹
         backend->MemcpyDeviceToDevice(
             temp_buffer,      // dst
             your_buffer,      // src
             buffer_size
         );
         
         std::cout << "   Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ " << (buffer_size / sizeof(float)) << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²\n";
         
         // ĞÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµĞ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ±ÑƒÑ„ĞµÑ€
         clReleaseMemObject(temp_buffer);
     }
     
     std::cout << "\nâœ… ĞŸÑ€ÑĞ¼Ñ‹Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚!\n";
 }
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 // ĞŸĞ Ğ˜ĞœĞ•Ğ  4: Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸ĞµĞ¼
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 
 void Example4_OwnershipManagement() {
     std::cout << "\n" << std::string(80, '=') << "\n";
     std::cout << "EXAMPLE 4: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸ĞµĞ¼ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸\n";
     std::cout << std::string(80, '=') << "\n\n";
     
     YourExistingOpenCL your_opencl;
     
     std::cout << "ğŸ“Œ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ external backend...\n";
     auto backend = std::make_unique<drv_gpu_lib::OpenCLBackendExternal>();
     
     std::cout << "   OwnsResources() = " << backend->OwnsResources() << " (false)\n";
     
     backend->InitializeFromExternalContext(
         your_opencl.GetContext(),
         your_opencl.GetDevice(),
         your_opencl.GetQueue()
     );
     
     std::cout << "\nğŸ“Œ ĞŸĞ¾ÑĞ»Ğµ InitializeFromExternalContext()...\n";
     std::cout << "   OwnsResources() = " << backend->OwnsResources() << " (Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ false)\n";
     std::cout << "   Initialized = " << backend->IsInitialized() << "\n";
     
     std::cout << "\nğŸ“Œ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ IBackend API...\n";
     void* ctx = backend->GetNativeContext();
     void* dev = backend->GetNativeDevice();
     void* queue = backend->GetNativeQueue();
     
     std::cout << "   Context: " << (ctx ? "OK âœ…" : "NULL âŒ") << "\n";
     std::cout << "   Device: " << (dev ? "OK âœ…" : "NULL âŒ") << "\n";
     std::cout << "   Queue: " << (queue ? "OK âœ…" : "NULL âŒ") << "\n";
     
     std::cout << "\nğŸ“Œ Ğ£Ğ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ĞµĞ¼ backend...\n";
     backend.reset();
     
     std::cout << "   âœ… ~OpenCLBackendExternal() Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½\n";
     std::cout << "   âœ… ~OpenCLBackend() â†’ Cleanup() Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½\n";
     std::cout << "   âœ… Cleanup() ÑƒĞ²Ğ¸Ğ´ĞµĞ» owns_resources_ = false\n";
     std::cout << "   âœ… ĞĞ• Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ» clReleaseCommandQueue/clReleaseContext!\n";
     
     std::cout << "\nğŸ“Œ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ²Ğ°Ñˆ OpenCL Ğ¾Ğ±ÑŠĞµĞºÑ‚...\n";
     std::cout << "   Context Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ Ğ²Ğ°Ğ»Ğ¸Ğ´ĞµĞ½: " 
               << (your_opencl.GetContext() ? "OK âœ…" : "NULL âŒ") << "\n";
     
     std::cout << "\nğŸ‰ Ğ’Ğ°Ñˆ ĞºĞ¾Ğ´ ÑĞ°Ğ¼ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ¸Ñ‚ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ¿Ñ€Ğ¸ Ğ´ĞµÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸!\n";
 }
 
 // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ĞŸĞ Ğ˜ĞœĞ•Ğ  5: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ external backend Ñ‡ĞµÑ€ĞµĞ· Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ API (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

void Example5_UsingBackendDirectly() {
  std::cout << "\n" << std::string(80, '=') << "\n";
  std::cout << "EXAMPLE 5: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ backend Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· IBackend API\n";
  std::cout << std::string(80, '=') << "\n\n";
  
  YourExistingOpenCL your_opencl;
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ external backend
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  std::cout << "ğŸ“Œ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ external backend...\n";
  
  auto backend = std::make_unique<drv_gpu_lib::OpenCLBackendExternal>();
  backend->InitializeFromExternalContext(
      your_opencl.GetContext(),
      your_opencl.GetDevice(),
      your_opencl.GetQueue()
  );
  
  std::cout << "   âœ… Backend Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½\n";
  std::cout << "   Device: " << backend->GetDeviceName() << "\n";
  std::cout << "   Backend owns resources: " << backend->OwnsResources() << "\n";
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ backend Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· IBackend Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  std::cout << "\nğŸ“Œ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµĞ¼ Ñ backend Ñ‡ĞµÑ€ĞµĞ· IBackend API...\n";
  
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğµ
  auto device_info = backend->GetDeviceInfo();
  std::cout << "\n   ğŸ“Š Device Info:\n";
  std::cout << "      Name: " << device_info.name << "\n";
  std::cout << "      Vendor: " << device_info.vendor << "\n";
  std::cout << "      OpenCL Version: " << device_info.opencl_version << "\n";
  std::cout << "      Global Memory: " << (device_info.global_memory_size / (1024*1024)) << " MB\n";
  std::cout << "      Compute Units: " << device_info.max_compute_units << "\n";
  std::cout << "      Max Work Group Size: " << device_info.max_work_group_size << "\n";
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Ğ’Ñ‹Ğ´ĞµĞ»ÑĞµĞ¼ GPU Ğ±ÑƒÑ„ĞµÑ€ Ñ‡ĞµÑ€ĞµĞ· backend
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  std::cout << "\nğŸ“Œ Ğ’Ñ‹Ğ´ĞµĞ»ÑĞµĞ¼ GPU Ğ±ÑƒÑ„ĞµÑ€ Ñ‡ĞµÑ€ĞµĞ· Allocate()...\n";
  size_t buffer_size = 512 * sizeof(float);
  void* gpu_buffer = backend->Allocate(buffer_size);
  
  if (gpu_buffer) {
      std::cout << "   âœ… Ğ’Ñ‹Ğ´ĞµĞ»ĞµĞ½ Ğ±ÑƒÑ„ĞµÑ€: " << buffer_size << " bytes\n";
      
      // Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
      std::vector<float> data(512);
      for (size_t i = 0; i < data.size(); ++i) {
          data[i] = static_cast<float>(i) * 2.0f;
      }
      
      // ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ½Ğ° GPU
      backend->MemcpyHostToDevice(gpu_buffer, data.data(), buffer_size);
      std::cout << "   âœ… Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ½Ğ° GPU (" << data.size() << " ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²)\n";
      
      // Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼
      backend->Synchronize();
      std::cout << "   âœ… Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°\n";
      
      // Ğ§Ğ¸Ñ‚Ğ°ĞµĞ¼ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾
      std::vector<float> result(512);
      backend->MemcpyDeviceToHost(result.data(), gpu_buffer, buffer_size);
      std::cout << "   âœ… Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ñ‹ Ñ GPU\n";
      
      // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼
      bool correct = true;
      for (size_t i = 0; i < 10; ++i) {
          if (result[i] != data[i]) {
              correct = false;
              break;
          }
      }
      
      std::cout << "   ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…: " << (correct ? "OK âœ…" : "FAIL âŒ") << "\n";
      std::cout << "      ĞŸĞµÑ€Ğ²Ñ‹Ğµ 5 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²: ";
      for (size_t i = 0; i < 5; ++i) {
          std::cout << result[i] << " ";
      }
      std::cout << "\n";
      
      // ĞÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµĞ¼
      backend->Free(gpu_buffer);
      std::cout << "   âœ… Ğ‘ÑƒÑ„ĞµÑ€ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ñ‘Ğ½\n";
  } else {
      std::cout << "   âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ²Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ±ÑƒÑ„ĞµÑ€\n";
  }
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  std::cout << "\nğŸ“Œ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°...\n";
  std::cout << "   SVM Support: " << (backend->SupportsSVM() ? "YES âœ…" : "NO âŒ") << "\n";
  std::cout << "   Double Precision: " << (backend->SupportsDoublePrecision() ? "YES âœ…" : "NO âŒ") << "\n";
  std::cout << "   Global Memory: " << (backend->GetGlobalMemorySize() / (1024*1024)) << " MB\n";
  std::cout << "   Local Memory: " << (backend->GetLocalMemorySize() / 1024) << " KB\n";
  
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ…ÑĞ½Ğ´Ğ»Ñ‹ (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  std::cout << "\nğŸ“Œ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ OpenCL Ñ…ÑĞ½Ğ´Ğ»Ñ‹...\n";
  void* native_ctx = backend->GetNativeContext();
  void* native_dev = backend->GetNativeDevice();
  void* native_queue = backend->GetNativeQueue();
  
  std::cout << "   Native Context: " << native_ctx << "\n";
  std::cout << "   Native Device: " << native_dev << "\n";
  std::cout << "   Native Queue: " << native_queue << "\n";
  
  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ñ‚Ğµ Ğ¶Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹, Ñ‡Ñ‚Ğ¾ Ğ¸ Ğ² YourExistingOpenCL
  bool same_context = (native_ctx == your_opencl.GetContext());
  bool same_device = (native_dev == your_opencl.GetDevice());
  bool same_queue = (native_queue == your_opencl.GetQueue());
  
  std::cout << "\n   ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ…ÑĞ½Ğ´Ğ»Ğ¾Ğ²:\n";
  std::cout << "      Context match: " << (same_context ? "YES âœ…" : "NO âŒ") << "\n";
  std::cout << "      Device match: " << (same_device ? "YES âœ…" : "NO âŒ") << "\n";
  std::cout << "      Queue match: " << (same_queue ? "YES âœ…" : "NO âŒ") << "\n";
  
  std::cout << "\nğŸ‰ Backend Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ OpenCL ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼!\n";
  
  // ~OpenCLBackendExternal() â†’ ĞĞ• Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ Ğ²Ğ°Ñˆ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ (owns_resources = false)
}
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN: Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ²
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

namespace external_context_example {

  int run() {
      std::cout << R"(
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                                                                            â•‘
  â•‘       DrvGPU - ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« Ğ ĞĞ‘ĞĞ¢Ğ« Ğ¡ Ğ’ĞĞ•Ğ¨ĞĞ˜Ğœ OpenCL ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢ĞĞœ                 â•‘
  â•‘                                                                            â•‘
  â•‘       ĞĞ²Ñ‚Ğ¾Ñ€: DrvGPU Team                                                   â•‘
  â•‘       Ğ”Ğ°Ñ‚Ğ°: 2026-02-02                                                     â•‘
  â•‘       Ğ’ĞµÑ€ÑĞ¸Ñ: 2.0 (Ñ owns_resources_)                                      â•‘
  â•‘                                                                            â•‘
  â•‘       âœ… ĞšĞ›Ğ®Ğ§Ğ•Ğ’ĞĞ¯ ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ¬:                                             â•‘
  â•‘       OpenCLBackendExternal Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚                    â•‘
  â•‘       owns_resources_ = false â†’ ĞĞ• Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµÑ‚ Ğ²Ğ°Ñˆ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚!              â•‘
  â•‘                                                                            â•‘
  â•‘       ğŸ“š API Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ:                                                 â•‘
  â•‘       - IBackend::MemcpyHostToDevice()                                     â•‘
  â•‘       - IBackend::MemcpyDeviceToHost()                                     â•‘
  â•‘       - IBackend::MemcpyDeviceToDevice()                                   â•‘
  â•‘       - IBackend::Allocate() / Free()                                      â•‘
  â•‘       - IBackend::GetNativeContext/Device/Queue()                          â•‘
  â•‘                                                                            â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  )";
  
      try {
          // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
          Example1_BasicExternalContext();
          
          // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ Ğ±ÑƒÑ„ĞµÑ€Ğ°Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· IBackend
          Example2_WorkingWithExternalBuffers();
          
          // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 3: ĞŸÑ€ÑĞ¼Ñ‹Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
          Example3_DirectBufferUtilities();
          
          // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 4: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸ĞµĞ¼
          Example4_OwnershipManagement();
          
          // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 5: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ backend Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ)
          Example5_UsingBackendDirectly();
          
          std::cout << "\n" << std::string(80, '=') << "\n";
          std::cout << "âœ… Ğ’Ğ¡Ğ• ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ« Ğ£Ğ¡ĞŸĞ•Ğ¨ĞĞ!\n";
          std::cout << std::string(80, '=') << "\n\n";
          
          return 0;
          
      } catch (const std::exception &e) {
          std::cerr << "\nâŒ ĞĞ¨Ğ˜Ğ‘ĞšĞ: " << e.what() << "\n";
          return 1;
      }
  }
  
  } // namespace external_context_example
  