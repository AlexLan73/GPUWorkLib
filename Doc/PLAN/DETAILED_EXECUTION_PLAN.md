# DETAILED EXECUTION PLAN - GPUWorkLib / plan2.md
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
# –ê–≤—Ç–æ—Ä: –ö–æ–¥–æ (AI Assistant)
# –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2026-02-07
# –ü—Ä–æ–µ–∫—Ç: LCH-Farrow1 (Multi-GPU FFT/IFFT Benchmark)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

## –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

- [ ] ‚Äî –ù–µ –Ω–∞—á–∞—Ç–æ
- [~] ‚Äî –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- [x] ‚Äî –í—ã–ø–æ–ª–Ω–µ–Ω–æ
- [!] ‚Äî –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è / –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

---

## –≠–¢–ê–ü 1: –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è DrvGPU (–ø–ª–∞–Ω –ø.2)
**–¶–µ–ª—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π DrvGPU ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ interface/, include/, src/, logger/, config/
**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** common/ —Ä–∞–∑—Ä–æ—Å—Å—è –¥–æ 13 —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –ù—É–∂–Ω–∞ —á—ë—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

### 1.1 –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
DrvGPU/
‚îú‚îÄ‚îÄ common/                         # –¢–û–õ–¨–ö–û –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Ç–∏–ø—ã, enums
‚îÇ   ‚îú‚îÄ‚îÄ backend_type.hpp            # (–æ—Å—Ç–∞—ë—Ç—Å—è) BackendType enum
‚îÇ   ‚îú‚îÄ‚îÄ gpu_device_info.hpp         # (–æ—Å—Ç–∞—ë—Ç—Å—è) GPUDeviceInfo struct
‚îÇ   ‚îú‚îÄ‚îÄ load_balancing.hpp          # (–æ—Å—Ç–∞—ë—Ç—Å—è) LoadBalancingStrategy
‚îÇ   ‚îî‚îÄ‚îÄ memory_type.hpp            # (–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–∑ memory/)
‚îÇ
‚îú‚îÄ‚îÄ interface/                      # –í–°–ï –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ i_backend.hpp              # (–∏–∑ common/) IBackend
‚îÇ   ‚îú‚îÄ‚îÄ i_compute_module.hpp       # (–∏–∑ common/) IComputeModule
‚îÇ   ‚îú‚îÄ‚îÄ i_memory_buffer.hpp        # (–∏–∑ memory/) IMemoryBuffer
‚îÇ   ‚îú‚îÄ‚îÄ i_logger.hpp               # (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∏–∑ common/logger_interface.hpp)
‚îÇ   ‚îî‚îÄ‚îÄ i_data_sink.hpp            # (NEW) –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Logger/Profiler/Console/DB
‚îÇ
‚îú‚îÄ‚îÄ include/                        # –ü—É–±–ª–∏—á–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ drv_gpu.hpp                # –ì–ª–∞–≤–Ω—ã–π include (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ gpu_manager.hpp            # (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ module_registry.hpp        # (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å)
‚îÇ
‚îú‚îÄ‚îÄ logger/                         # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ logger.hpp                 # (–∏–∑ common/) –§–∞—Å–∞–¥ Logger
‚îÇ   ‚îú‚îÄ‚îÄ logger.cpp                 # (–∏–∑ common/)
‚îÇ   ‚îú‚îÄ‚îÄ default_logger.hpp/cpp     # (–∏–∑ common/) spdlog —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ config_logger.hpp/cpp      # (–∏–∑ common/) ConfigLogger singleton
‚îÇ
‚îú‚îÄ‚îÄ config/                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (NEW ‚Äî —Å–º. –≠—Ç–∞–ø 2)
‚îÇ   ‚îú‚îÄ‚îÄ gpu_config.hpp/cpp         # GPUConfig singleton + JSON
‚îÇ   ‚îî‚îÄ‚îÄ config_types.hpp           # GPUConfigEntry struct
‚îÇ
‚îú‚îÄ‚îÄ services/                       # Singleton-—Å–µ—Ä–≤–∏—Å—ã (NEW ‚Äî —Å–º. –≠—Ç–∞–ø 3)
‚îÇ   ‚îú‚îÄ‚îÄ gpu_profiler.hpp/cpp       # GPUProfiler singleton
‚îÇ   ‚îú‚îÄ‚îÄ console_output.hpp/cpp     # ConsoleOutput singleton
‚îÇ   ‚îî‚îÄ‚îÄ batch_manager.hpp/cpp      # BatchManager (—Å–º. –≠—Ç–∞–ø 5)
‚îÇ
‚îú‚îÄ‚îÄ src/                            # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (NEW)
‚îÇ   ‚îú‚îÄ‚îÄ drv_gpu.cpp                # (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ module_registry.cpp        # (–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å)
‚îÇ
‚îú‚îÄ‚îÄ backends/                       # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ opencl/
‚îÇ       ‚îú‚îÄ‚îÄ command_queue_pool.hpp/cpp
‚îÇ       ‚îú‚îÄ‚îÄ opencl_backend.hpp/cpp
‚îÇ       ‚îú‚îÄ‚îÄ opencl_backend_external.hpp/cpp
‚îÇ       ‚îî‚îÄ‚îÄ opencl_core.hpp/cpp
‚îÇ
‚îú‚îÄ‚îÄ memory/                         # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∫—Ä–æ–º–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è memory_type, i_memory_buffer)
‚îÇ   ‚îú‚îÄ‚îÄ external_cl_buffer_adapter.hpp
‚îÇ   ‚îú‚îÄ‚îÄ gpu_buffer.hpp
‚îÇ   ‚îú‚îÄ‚îÄ memory_manager.hpp/cpp
‚îÇ   ‚îú‚îÄ‚îÄ svm_buffer.hpp
‚îÇ   ‚îî‚îÄ‚îÄ svm_capabilities.hpp
‚îÇ
‚îî‚îÄ‚îÄ tests/                          # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ single_gpu.hpp
    ‚îú‚îÄ‚îÄ multi_gpu.hpp
    ‚îî‚îÄ‚îÄ example_external_context_usage.hpp
```

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 1:
> **–°–¢–ê–¢–£–°: –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã, —Ñ–∞–π–ª—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ä–∞–∑–º–µ—â–µ–Ω—ã.
> –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ common/ –æ—Ç–ª–æ–∂–µ–Ω–æ (–Ω–µ –ª–æ–º–∞—Ç—å #include –ø—É—Ç–∏ –¥–æ –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏).

- [x] 1.1.1 –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: interface/, include/, logger/, config/, services/, src/
- [~] 1.1.2 –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ common/ –≤ interface/:
  - common/i_backend.hpp ‚Üí interface/i_backend.hpp ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ**
  - common/i_compute_module.hpp ‚Üí interface/i_compute_module.hpp ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ**
  - common/logger_interface.hpp ‚Üí interface/i_logger.hpp ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ**
  - memory/i_memory_buffer.hpp ‚Üí interface/i_memory_buffer.hpp ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ**
  - [x] **–°–û–ó–î–ê–ù:** interface/i_data_sink.hpp ‚úÖ
- [~] 1.1.3 –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ common/ –≤ logger/ ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ** (–Ω–µ –ª–æ–º–∞—Ç—å —Å–±–æ—Ä–∫—É)
- [~] 1.1.4 –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ include/ ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ** (–Ω–µ –ª–æ–º–∞—Ç—å —Å–±–æ—Ä–∫—É)
- [~] 1.1.5 –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ src/ ‚Äî **–æ—Ç–ª–æ–∂–µ–Ω–æ** (–Ω–µ –ª–æ–º–∞—Ç—å —Å–±–æ—Ä–∫—É)
- [ ] 1.1.6 –û–±–Ω–æ–≤–∏—Ç—å –í–°–ï #include –ø—É—Ç–∏ –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- [ ] 1.1.7 –û–±–Ω–æ–≤–∏—Ç—å CMakeLists.txt (DrvGPU/ –∏ modules/)
- [ ] 1.1.8 –°–æ–∑–¥–∞—Ç—å redirect-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (deprecated)
- [ ] 1.1.9 –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [ ] 1.1.10 –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

---

## –≠–¢–ê–ü 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GPU ‚Äî configGPU.json (–ø–ª–∞–Ω –ø.4)
**–¶–µ–ª—å:** –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è GPU-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** nlohmann/json (header-only)
**–ü—Ä–∏–Ω—Ü–∏–ø:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ‚Äî –µ—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç –≤ JSON, –±–µ—Ä—ë–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### 2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```cpp
// config_types.hpp

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GPUConfigEntry ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ GPU-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
// –ï—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ JSON ‚Äî –±–µ—Ä—ë—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (false, "", 0)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
struct GPUConfigEntry {
    int id = 0;                        // ID GPU-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (0-based)
    std::string name = "GPU";          // –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ–µ –∏–º—è
    bool is_prof = false;              // –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ GPU
    bool is_logger = false;            // –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ GPU
    bool is_console = false;           // –í–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥ –Ω–∞ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è —ç—Ç–æ–≥–æ GPU
    bool is_active = true;             // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ GPU (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)

    // –ë—É–¥—É—â–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–¥–µ—Ñ–æ–ª—Ç false/0):
    bool is_db = false;                // –ó–∞–ø–∏—Å—å –≤ –ë–î
    size_t max_memory_percent = 70;    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π % –ø–∞–º—è—Ç–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    std::string log_level = "INFO";    // –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
};
```

### 2.2 –§–æ—Ä–º–∞—Ç configGPU.json
```json
{
  "version": "1.0",
  "description": "GPU Configuration for DrvGPU",
  "gpus": [
    {
      "id": 0,
      "name": "Alex",
      "is_prof": true,
      "is_logger": true,
      "is_console": true
    },
    {
      "id": 1,
      "name": "Evgeni"
    }
  ]
}
```

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 2:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã.

- [x] 2.1 –î–æ–±–∞–≤–∏—Ç—å nlohmann/json –≤ –ø—Ä–æ–µ–∫—Ç (header-only, —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å json.hpp)
      ‚Üí **third_party/nlohmann/json.hpp** ‚úÖ
- [x] 2.2 –°–æ–∑–¥–∞—Ç—å DrvGPU/config/config_types.hpp ‚Äî struct GPUConfigEntry —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏ ‚úÖ
- [x] 2.3 –°–æ–∑–¥–∞—Ç—å DrvGPU/config/gpu_config.hpp/.cpp ‚Äî class GPUConfig (Singleton) ‚úÖ
  - [x] 2.3.1 Load(path) ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å JSON, –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å j.value("field", default)
  - [x] 2.3.2 Save(path) ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  - [x] 2.3.3 CreateDefault() / LoadOrCreate() ‚Äî —Å–æ–∑–¥–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π configGPU.json
  - [x] 2.3.4 GetConfig(gpu_id) ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ GPU
  - [x] 2.3.5 GetAllConfigs() ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - [x] 2.3.6 Thread-safe –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ mutex
- [~] 2.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GPUManager:
  - [ ] 2.4.1 GPUManager::InitializeAll() —á–∏—Ç–∞–µ—Ç configGPU.json ‚Äî **–±—É–¥—É—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
  - [ ] 2.4.2 –ü–µ—Ä–µ–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∂–¥–æ–º—É DrvGPU –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - [ ] 2.4.3 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ active GPU –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- [ ] 2.5 –û–±–Ω–æ–≤–∏—Ç—å CMakeLists.txt
- [ ] 2.6 –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –≠–¢–ê–ü 3: Singleton-—Å–µ—Ä–≤–∏—Å—ã (Logger/Profiler/Console) (–ø–ª–∞–Ω –ø.3)
**–¶–µ–ª—å:** –ï–¥–∏–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–≤–æ–¥–∞ –Ω–∞ –∫–æ–Ω—Å–æ–ª—å
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å = –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ + –≤—Ö–æ–¥–Ω–∞—è –æ—á–µ—Ä–µ–¥—å + Observer pattern
**–ü—Ä–∏–Ω—Ü–∏–ø:** –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª GPU –ù–ï —Ç—Ä–∞—Ç–∏—Ç –≤—Ä–µ–º—è ‚Äî —Ç–æ–ª—å–∫–æ –∫–ª–∞–¥—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥—å

### 3.0 –û–±—â–∏–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å–µ—Ä–≤–∏—Å–æ–≤

```cpp
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AsyncServiceBase ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// - –û—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø–æ—Ç–æ–∫ (std::thread)
// - Lock-free –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤—Ö–æ–¥–µ (std::queue + mutex + condition_variable)
// - Observer: –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –ø–æ notify, —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
// - Start() / Stop() ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–æ—Ç–æ–∫–∞
// - Enqueue(data) ‚Äî –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å
//
// –ì–∞—Ä–∞–Ω—Ç–∏–∏:
// - –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ GPU –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∂–¥—ë—Ç ‚Äî —Ç–æ–ª—å–∫–æ Enqueue (lock-free push)
// - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–¥—ë—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
// - –ü—Ä–∏ Stop() ‚Äî –¥–æ–∂–¥–∞—Ç—å—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥–∏
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
template<typename TMessage>
class AsyncServiceBase {
    std::thread worker_thread_;
    std::queue<TMessage> queue_;
    std::mutex queue_mutex_;
    std::condition_variable cv_;
    std::atomic<bool> running_{false};

    void WorkerLoop();                      // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –ø–æ—Ç–æ–∫–∞
    virtual void ProcessMessage(const TMessage& msg) = 0;  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
public:
    void Start();                           // –ó–∞–ø—É—Å–∫ –ø–æ—Ç–æ–∫–∞
    void Stop();                            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏)
    void Enqueue(TMessage msg);             // –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
    bool IsRunning() const;
};
```

### 3.1 Logger ‚Äî –¥–æ—Ä–∞–±–æ—Ç–∫–∞ (–ø–ª–∞–Ω –ø.3.1)

**–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:**
- –ï—Å—Ç—å: ILogger, DefaultLogger (spdlog), ConfigLogger (singleton), Logger (—Ñ–∞—Å–∞–¥)
- –ü—É—Ç—å: `${path}/Logs/DRVGPU/YYYY-MM-DD/HH-MM-SS.log`
- –ù–ï–¢: gpu_id –≤ –ø—É—Ç–∏, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å, –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫

**–ß–¢–û –ò–ó–ú–ï–ù–ò–¢–¨:**
```
–ë–´–õ–û:  ${path}/Logs/DRVGPU/YYYY-MM-DD/HH-MM-SS.log
–°–¢–ê–õ–û: ${path}/Logs/DRVGPU_00/YYYY-MM-DD/HH-MM-SS.log
       ${path}/Logs/DRVGPU_01/YYYY-MM-DD/HH-MM-SS.log
       ${path}/Logs/DRVGPU_13/YYYY-MM-DD/HH-MM-SS.log
```

**–ê–†–•–ò–¢–ï–ö–¢–£–†–ê Logger (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è):**
```
GPU Thread 0 ‚îÄ‚Üí Logger::Log(gpu_id=0, msg) ‚îÄ‚Üí Enqueue() ‚îÄ‚Üí‚îê
GPU Thread 1 ‚îÄ‚Üí Logger::Log(gpu_id=1, msg) ‚îÄ‚Üí Enqueue() ‚îÄ‚Üí‚îú‚îÄ‚Üí [–û—á–µ—Ä–µ–¥—å] ‚îÄ‚Üí Worker Thread
GPU Thread N ‚îÄ‚Üí Logger::Log(gpu_id=N, msg) ‚îÄ‚Üí Enqueue() ‚îÄ‚Üí‚îò       ‚îÇ
                                                                    ‚Üì
                                                        ProcessMessage(msg):
                                                          file = GetLogFile(msg.gpu_id)
                                                          file.write(msg)
```

**Logger –∏ Profiler –∏–º–µ—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ô –®–ê–ë–õ–û–ù (AsyncServiceBase),**
–Ω–æ –†–ê–ó–ù–£–Æ –æ–±—Ä–∞–±–æ—Ç–∫—É:
- Logger ‚Üí –ø–∏—à–µ—Ç –≤ —Ñ–∞–π–ª (spdlog)
- Profiler ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏, –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ó–∞–¥–∞—á–∏ 3.1 Logger:
> **–°–¢–ê–¢–£–°: –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî AsyncServiceBase —Å–æ–∑–¥–∞–Ω, config_logger –¥–æ—Ä–∞–±–æ—Ç–∞–Ω.
> DefaultLogger –µ—â—ë –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç AsyncServiceBase (–±—É–¥—É—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥).

- [x] 3.1.1 –°–æ–∑–¥–∞—Ç—å services/async_service_base.hpp ‚Äî —à–∞–±–ª–æ–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å ‚úÖ
  - [x] –û—Ç–¥–µ–ª—å–Ω—ã–π std::thread
  - [x] std::queue + mutex + condition_variable
  - [x] Start() / Stop() / Enqueue() / EnqueueBatch()
  - [x] virtual ProcessMessage() = 0
  - [x] virtual GetServiceName() = 0
  - [x] OnWorkerStart() / OnWorkerStop() ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏
  - [x] GetQueueSize() / GetProcessedCount() ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- [x] 3.1.2 –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å config_logger.hpp/.cpp:
  - [x] –î–æ–±–∞–≤–∏—Ç—å gpu_id –≤ GetLogFilePathForGPU(int gpu_id) ‚úÖ
  - [x] –§–æ—Ä–º–∞—Ç: DRVGPU_XX (XX = –¥–≤—É–∑–Ω–∞—á–Ω—ã–π –Ω–æ–º–µ—Ä —Å –≤–µ–¥—É—â–∏–º –Ω—É–ª—ë–º) ‚úÖ
  - [x] CreateLogDirectoryForGPU(int gpu_id) ‚úÖ
- [~] 3.1.3 –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å default_logger.hpp/.cpp:
  - [ ] –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç AsyncServiceBase<LogMessage> ‚Äî **–±—É–¥—É—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
  - [ ] LogMessage = {gpu_id, level, component, message, timestamp}
  - [ ] ProcessMessage: –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ spdlog –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ gpu_id
  - [ ] –ü—É–ª spdlog –ª–æ–≥–µ—Ä–æ–≤: map<gpu_id, shared_ptr<spdlog::logger>>
- [~] 3.1.4 –û–±–Ω–æ–≤–∏—Ç—å Logger —Ñ–∞—Å–∞–¥:
  - [ ] Logger::Info(gpu_id, component, message) ‚Äî **–±—É–¥—É—â–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
  - [ ] Logger::Info(component, message) ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (gpu_id=0)
- [ ] 3.1.5 –û–±–Ω–æ–≤–∏—Ç—å –º–∞–∫—Ä–æ—Å—ã DRVGPU_LOG_*:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–∏ —Å gpu_id: DRVGPU_LOG_INFO_GPU(gpu_id, component, message)
- [~] 3.1.6 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å configGPU.json:
  - [x] is_logger=true/false ‚Üí –ø–æ–ª–µ –µ—Å—Ç—å –≤ GPUConfigEntry ‚úÖ
  - [ ] –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Logger
- [ ] 3.1.7 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∑–∞–ø—É—Å–∫ 2+ GPU, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö –ª–æ–≥-—Ñ–∞–π–ª–æ–≤

### 3.2 GPU Profiler (–ø–ª–∞–Ω –ø.3.2)

**–ê–†–•–ò–¢–ï–ö–¢–£–†–ê:**
```
GPU Module ‚îÄ‚Üí Profiler::Record(gpu_id, event_name, duration_ms) ‚îÄ‚Üí Enqueue() ‚îÄ‚Üí‚îê
                                                                                  ‚Üì
                                                                          [Worker Thread]
                                                                                  ‚îÇ
                                                                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                                  ‚Üì               ‚Üì               ‚Üì
                                                           –ê–≥—Ä–µ–≥–∞—Ü–∏—è       –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª    –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                                                           (min/max/avg)   (JSON —Ñ–æ—Ä–º–∞—Ç)    Observer'–æ–≤
```

### –ó–∞–¥–∞—á–∏ 3.2 Profiler:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî GPUProfiler –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

- [x] 3.2.1 –°–æ–∑–¥–∞—Ç—å services/gpu_profiler.hpp ‚Äî class GPUProfiler : AsyncServiceBase<ProfilingMessage> ‚úÖ
  - [x] ProfilingMessage = {gpu_id, module_name, event_name, duration_ms, timestamp}
  - [x] Singleton (GetInstance())
  - [x] ProcessMessage: –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ gpu_id + module + event
- [x] 3.2.2 API –¥–ª—è –º–æ–¥—É–ª–µ–π:
  - [x] GPUProfiler::Record(gpu_id, module, event, duration_ms)
  - [x] GPUProfiler::GetStats(gpu_id) ‚Üí map<module, ModuleStats>
  - [x] GPUProfiler::GetAllStats() ‚Üí map<gpu_id, map<module, ModuleStats>>
  - [x] GPUProfiler::Reset()
- [x] 3.2.3 ProfilingStats (EventStats struct):
  - [x] call_count, total_ms, min_ms, max_ms + avg (calculated)
  - [x] ModuleStats: map<event_name, EventStats> + total_events, total_time
- [x] 3.2.4 –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ JSON —Ñ–∞–π–ª:
  - [x] ExportJSON(path) ‚úÖ
  - [x] PrintSummary() ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç ‚úÖ
- [x] 3.2.5 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å configGPU.json:
  - [x] EnableGPU(gpu_id) / DisableGPU(gpu_id) ‚úÖ
  - [x] is_prof=true/false –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ ServiceManager ‚úÖ
- [ ] 3.2.6 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî **–±—É–¥–µ—Ç –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

### 3.3 Console Output (–ø–ª–∞–Ω –ø.3.3)

**–ü–†–û–ë–õ–ï–ú–ê:** 8 GPU –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–∏—à—É—Ç –≤ stdout ‚Üí –∫–∞—à–∞
**–†–ï–®–ï–ù–ò–ï:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å

### –ó–∞–¥–∞—á–∏ 3.3 Console:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî ConsoleOutput –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

- [x] 3.3.1 –°–æ–∑–¥–∞—Ç—å services/console_output.hpp ‚Äî class ConsoleOutput : AsyncServiceBase<ConsoleMessage> ‚úÖ
  - [x] ConsoleMessage = {gpu_id, module_name, level, message, timestamp}
  - [x] Singleton (GetInstance())
  - [x] ProcessMessage: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤ stdout
- [x] 3.3.2 –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:
  - [x] `[HH:MM:SS.mmm] [INF] [GPU_XX] [Module] message` ‚úÖ
  - [x] –£—Ä–æ–≤–Ω–∏: INF, WRN, ERR, DBG ‚úÖ
- [x] 3.3.3 API:
  - [x] ConsoleOutput::Print(gpu_id, module, message) / Info / Warning / Error / Debug ‚úÖ
  - [x] ConsoleOutput::SetEnabled(bool) ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ –≤–∫–ª/–≤—ã–∫–ª ‚úÖ
  - [x] ConsoleOutput::EnableGPU(id) / DisableGPU(id) ‚Äî –ø–æ GPU ‚úÖ
- [x] 3.3.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å configGPU.json:
  - [x] is_console=true/false –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ ServiceManager ‚úÖ
- [ ] 3.3.5 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî **–±—É–¥–µ—Ç –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

### 3.4 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å IDataSink (–±—É–¥—É—â–µ–µ ‚Äî DB –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

### –ó–∞–¥–∞—á–∏ 3.4:
> **–°–¢–ê–¢–£–°: –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî IDataSink —Å–æ–∑–¥–∞–Ω, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ ‚Äî –±—É–¥—É—â–µ–µ.

- [x] 3.4.1 –°–æ–∑–¥–∞—Ç—å interface/i_data_sink.hpp ‚úÖ
  - [x] IDataSink –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å (Write, Flush, GetName)
  - [x] DataRecord struct (timestamp, gpu_id, module, message, severity, metadata)
  - [x] DataSeverity enum (Debug, Info, Warning, Error, Critical)
- [ ] 3.4.2 –ó–∞–ª–æ–∂–∏—Ç—å –≤ Logger/Profiler/Console –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IDataSink
- [ ] 3.4.3 –°–±–æ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –≠—Ç–∞–ø–∞ 3

**–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û –°–û–ó–î–ê–ù–û (–Ω–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –ø–ª–∞–Ω–µ):**
- [x] **services/service_manager.hpp** ‚úÖ ‚Äî ServiceManager (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏)
  - [x] InitializeFromConfig(configPath) ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ configGPU.json
  - [x] InitializeDefaults() ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  - [x] StartAll() / StopAll() ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
  - [x] ExportProfiling(path) / PrintProfilingSummary() / GetStatus()

---

## –≠–¢–ê–ü 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ fft_maxima vs DrvGPU (–ø–ª–∞–Ω –ø.1)
**–¶–µ–ª—å:** –ü—Ä–∏–≤–µ—Å—Ç–∏ fft_maxima –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π DrvGPU, –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4.1 –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—á—Ç–æ –Ω–∞–π–¥–µ–Ω–æ)

**–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:**
- [x] AntennaFFTCore –ø—Ä–∏–Ω–∏–º–∞–µ—Ç IBackend* ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ, Multi-GPU
- [x] –ü–æ–ª—É—á–∞–µ—Ç context/device/queue –∏–∑ backend ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [x] Batching logic —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (ProcessWithBatching)
- [x] BatchConfig + CalculateBatchConfig + NeedsBatching ‚Äî –µ—Å—Ç—å

**–ù–ï –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ / –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- [ ] ‚ùå –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è command queue (–Ω–∞–ø—Ä—è–º—É—é –±–µ—Ä—ë—Ç queue_ –∏–∑ –±—ç–∫–µ–Ω–¥–∞)
      ‚Üí –ù—É–∂–Ω–æ: CommandQueuePool::AcquireQueue() / ReleaseQueue()
- [ ] ‚ùå –ù–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è FFT –ø–ª–∞–Ω–æ–≤ (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ batch size)
      ‚Üí –ù—É–∂–Ω–æ: map<batch_size, clfftPlanHandle> ‚Äî –∫–µ—à –ø–ª–∞–Ω–æ–≤
- [ ] ‚ùå –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MemoryManager (–Ω–∞–ø—Ä—è–º—É—é clCreateBuffer)
      ‚Üí –ù—É–∂–Ω–æ: backend_->Allocate() –∏–ª–∏ MemoryManager::CreateBuffer()
- [ ] ‚ùå FFTLogger (–º–æ–¥—É–ª—å–Ω—ã–π) –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Logger DrvGPU (–≥–ª–æ–±–∞–ª—å–Ω—ã–º)
      ‚Üí –ù—É–∂–Ω–æ: FFTLogger ‚Üí –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ Logger DrvGPU + gpu_id
- [ ] ‚ùå –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ Profiler
      ‚Üí –ù—É–∂–Ω–æ: GPUProfiler::Record() –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ ProfileEvent()

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 4:
> **–°–¢–ê–¢–£–°: –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî FFTPlanCache —Å–æ–∑–¥–∞–Ω. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ core ‚Äî –±—É–¥—É—â–µ–µ.

- [ ] 4.1 –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ clCreateBuffer –Ω–∞ MemoryManager / IBackend::Allocate()
  - [ ] 4.1.1 AntennaFFTProcMax::AllocateBuffers() ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MemoryManager
  - [ ] 4.1.2 AntennaFFTCore::CreateInputBuffer() ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MemoryManager
  - [ ] 4.1.3 Userdata –±—É—Ñ–µ—Ä—ã ‚Äî —á–µ—Ä–µ–∑ MemoryManager
- [ ] 4.2 –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ CommandQueue:
  - [ ] 4.2.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CommandQueuePool –∏–∑ –±—ç–∫–µ–Ω–¥–∞
  - [ ] 4.2.2 AcquireQueue() –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, ReleaseQueue() –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏
- [x] 4.3 –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ FFT –ø–ª–∞–Ω–æ–≤: ‚úÖ
  - [x] 4.3.1 –°–æ–∑–¥–∞—Ç—å FFTPlanCache —Å –∫–ª—é—á–æ–º (nFFT, batch_size) ‚úÖ
      ‚Üí **modules/fft_maxima/include/fft_plan_cache.hpp**
  - [x] 4.3.2 GetOrCreate() ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–µ—à, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç ‚úÖ
  - [x] 4.3.3 RAII –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚Üí clfftDestroyPlan –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–Ω–æ–≤ ‚úÖ
  - [x] 4.3.4 IsBaked() / MarkBaked() ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ bake ‚úÖ
  - [x] 4.3.5 GetHitRatio() / PrintStats() ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–µ—à–∞ ‚úÖ
- [ ] 4.4 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å FFTLogger —Å Logger DrvGPU:
  - [ ] 4.4.1 FFTLogger::SetCallback ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –≤ DRVGPU_LOG_* —Å gpu_id
  - [ ] 4.4.2 –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å gpu_id –≤ AntennaFFTCore (–∏–∑ backend->GetDeviceIndex())
- [ ] 4.5 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å GPUProfiler:
  - [ ] 4.5.1 –ó–∞–º–µ–Ω–∏—Ç—å —Ä—É—á–Ω–æ–π ProfileEvent() –Ω–∞ GPUProfiler::Record()
  - [ ] 4.5.2 –ü—Ä–æ–≤–µ—Ä—è—Ç—å is_prof –∏–∑ configGPU.json
- [ ] 4.6 –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –≠–¢–ê–ü 5: Batch processing ‚Äî –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤—ã–Ω–æ—Å –≤ DrvGPU (–ø–ª–∞–Ω –ø.5)
**–¶–µ–ª—å:** –£–ª—É—á—à–∏—Ç—å batch management, –≤—ã–Ω–µ—Å—Ç–∏ –≤ DrvGPU –∫–∞–∫ –æ–±—â–∏–π —Å–µ—Ä–≤–∏—Å

### 5.1 –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ batching

**–ï–°–¢–¨ –≤ AntennaFFTCore:**
- BatchConfig: memory_usage_limit=0.65, batch_size_ratio=0.22
- CalculateBatchConfig(): —Ä–∞—Å—á—ë—Ç beams_per_batch
- CheckAvailableMemory(): CL_DEVICE_GLOBAL_MEM_SIZE * threshold
- ProcessWithBatching(): –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –ø–æ –±–∞—Ç—á–∞–º
- padding_kernel —Å beam_offset

**–í search_3_module-part4.cpp (–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û):**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π batch < 3 –ª—É—á–µ–π ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –∫ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–µ–º—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç MemoryManager –¥–ª—è batch –±—É—Ñ–µ—Ä–æ–≤ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –†–ï–ê–õ–¨–ù–£–Æ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å (–Ω–µ total, –∞ available - allocated)
- –ë—Ä–∞—Ç—å 70% –æ—Ç –°–í–û–ë–û–î–ù–û–ô –ø–∞–º—è—Ç–∏
- –í—ã–Ω–µ—Å—Ç–∏ BatchManager –≤ DrvGPU –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 5:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî BatchManager –∏ FFTBatchAdapter —Å–æ–∑–¥–∞–Ω—ã.
> –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ core (–∑–∞–º–µ–Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ batching) ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø (–Ω–µ –ª–æ–º–∞—Ç—å —Ä–∞–±–æ—á–∏–π –∫–æ–¥).

- [x] 5.1 –°–æ–∑–¥–∞—Ç—å DrvGPU/services/batch_manager.hpp/.cpp ‚Äî class BatchManager ‚úÖ
  - [x] CalculateOptimalBatchSize(total_items, item_bytes, available_memory, memory_limit)
  - [x] CreateBatches(total_items, items_per_batch, min_tail, merge_small_tail)
  - [x] PrintBatchInfo() ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥
  - [x] BatchRange struct: start, count, batch_idx, is_merged
- [x] 5.2 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç –ø–∞–º—è—Ç–∏:
  - [x] 5.2.1 –ü–∞—Ä–∞–º–µ—Ç—Ä available_memory –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∏–∑–≤–Ω–µ (–≥–∏–±–∫–æ—Å—Ç—å)
  - [x] 5.2.2 memory_limit = 0.7 (70% –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - [x] 5.2.3 –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ edge cases (0 items, –æ–≥—Ä–æ–º–Ω—ã–µ items)
- [x] 5.3 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å merge_small_tail: ‚úÖ
  - [x] –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π batch < min_tail ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –∫ –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–µ–º—É
  - [x] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: 1 batch, 2 batch, merged batch
- [x] 5.4 FFTBatchAdapter ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É AntennaFFT –∏ BatchManager: ‚úÖ
      ‚Üí **modules/fft_maxima/include/fft_batch_adapter.hpp**
  - [x] 5.4.1 CalculatePerBeamMemory() ‚Äî —Ç–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –∏–∑ AllocateBuffers()
  - [x] 5.4.2 CalculateBatches(backend) ‚Äî —á–µ—Ä–µ–∑ BatchManager
  - [x] 5.4.3 AllBeamsFit(backend) ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞: –≤–ª–µ–∑–∞–µ—Ç –ª–∏ –≤—Å—ë –≤ –æ–¥–Ω—É –ø–∞—á–∫—É
  - [x] 5.4.4 PrintMemoryInfo(backend) ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
  - [x] **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–ï –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π batching –≤ core (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å)
- [~] 5.5 –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å antenna_fft_core –Ω–∞ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:
  - [x] 5.5.1 –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ fft_batch_adapter.hpp –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
  - [ ] 5.5.2 –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ ‚Äî **–±—É–¥—É—â–µ–µ**
  - [ ] 5.5.3 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö ‚Äî **—á–∞—Å—Ç–∏—á–Ω–æ**
- [ ] 5.6 –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –≠–¢–ê–ü 6: –¢–µ—Å—Ç—ã ‚Äî CPU –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ SVM (–ø–ª–∞–Ω –ø.6)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ CPU –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ—Ä–µ–∑ SVM
**–§–∞–π–ª:** modules/fft_maxima/tests/test_fft_maxima.hpp
**–û–±—Ä–∞–∑–µ—Ü:** DrvGPU/tests/single_gpu.hpp

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 6:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ `test_fft_svm.hpp`
> (–∏–º—è –∏–∑–º–µ–Ω–µ–Ω–æ, —Ç.–∫. `test_fft_maxima.hpp` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç)

- [x] 6.1 –°–æ–∑–¥–∞—Ç—å modules/fft_maxima/tests/test_fft_svm.hpp ‚úÖ
  - [x] –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ (~400 —Å—Ç—Ä–æ–∫)
  - [x] namespace test_fft_svm, —Ñ—É–Ω–∫—Ü–∏—è inline int run()
  - [x] –í—ã–∑–æ–≤ –∏–∑ main: #include "test_fft_svm.hpp" ‚Üí test_fft_svm::run()
- [x] 6.2 –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞:
  - [x] 6.2.1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DrvGPU (OpenCL backend, GPU #0) ‚úÖ
  - [x] 6.2.2 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ CPU: ‚úÖ
    - 8 –ª—É—á–µ–π, 512 —Ç–æ—á–µ–∫, 256 FFT —Ç–æ—á–µ–∫, 3 –º–∞–∫—Å. –ø–∏–∫–∞
    - –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞: target_bin = beam * 10 + 10
    - –§–æ—Ä–º–∞—Ç: vector<complex<float>>
  - [x] 6.2.3 –°–æ–∑–¥–∞–Ω–∏–µ SVMBuffer (SVM_COARSE_GRAIN) ‚úÖ
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –µ—Å–ª–∏ SVM –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
  - [x] 6.2.4 –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: buffer.Write(signal_data) ‚úÖ
  - [x] 6.2.5 –°–æ–∑–¥–∞–Ω–∏–µ AntennaFFTProcMax(params, backend) ‚úÖ
  - [x] 6.2.6 –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ ProcessNew() ‚úÖ
    - SVM –ø—É—Ç—å: –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SVM ‚Üí cl_mem —á–µ—Ä–µ–∑ clCreateBuffer
    - Fallback: ProcessNew(vector<complex>) –Ω–∞–ø—Ä—è–º—É—é
  - [x] 6.2.7 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: ‚úÖ
    - –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞ –Ω–∞ –æ–∂–∏–¥–∞–µ–º–æ–π —á–∞—Å—Ç–æ—Ç–µ
    - Tolerance: ¬±2 –±–∏–Ω–∞
  - [x] 6.2.8 –í—ã–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ buffer.Read() ‚Äî SVM round-trip ‚úÖ
  - [x] 6.2.9 –í—ã–≤–æ–¥ —á–µ—Ä–µ–∑ ServiceManager/ConsoleOutput ‚úÖ
  - [x] 6.2.10 RAII –æ—á–∏—Å—Ç–∫–∞ (–¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã) ‚úÖ
- [ ] 6.3 –û–±–Ω–æ–≤–∏—Ç—å main.cpp –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ç–µ—Å—Ç–∞
- [ ] 6.4 –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] 6.5 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî —Å–∏–≥–Ω–∞–ª –Ω–∞–π–¥–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ?

---

## –≠–¢–ê–ü 7: –¢–µ—Å—Ç —Å –≤–Ω–µ—à–Ω–∏–º OpenCL –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–ø–ª–∞–Ω –ø.7)
**–¶–µ–ª—å:** –¢–µ—Å—Ç –ø—Ä–∏—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —á—É–∂–æ–≥–æ OpenCL –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
**–§–∞–π–ª:** modules/fft_maxima/tests/test_external_context_fft.hpp
**–û–±—Ä–∞–∑–µ—Ü:** DrvGPU/tests/example_external_context_usage.hpp

### 7.1 –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∞

```
                     –í–ù–ï–®–ù–ï–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï                    DrvGPU / fft_maxima
                     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. –°–æ–∑–¥–∞—Ç—å cl_context + cl_queue ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí
2. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ GPU (cl_mem) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí
3. –ü–µ—Ä–µ–¥–∞—Ç—å: cl_context + cl_device + cl_queue + cl_mem ‚îÄ‚Üí 4. OpenCLBackendExternal::InitializeFromExternalContext()
                                                           5. –ü—Ä–∏–Ω—è—Ç—å cl_mem ‚Üí AntennaFFTProcMax
                                                           6. –í—ã–ø–æ–ª–Ω–∏—Ç—å FFT + –ø–æ–∏—Å–∫ –º–∞–∫—Å–∏–º—É–º–æ–≤
                                                           7. –†–µ–∑—É–ª—å—Ç–∞—Ç:
                                                              a) CPU: vector<FFTResult> ‚îÄ‚Üí –≤–µ—Ä–Ω—É—Ç—å
                                                              b) GPU (cl_mem): —Å–æ–∑–¥–∞—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π cl_mem ‚îÄ‚Üí –≤–µ—Ä–Ω—É—Ç—å
                                                              c) SVM ‚Üí cl_mem –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
8. ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ü–æ–ª—É—á–∏—Ç—å CPU —Ä–µ–∑—É–ª—å—Ç–∞—Ç
9. ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ü–æ–ª—É—á–∏—Ç—å cl_mem —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Å—ã–ª–∫—É)
10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
11. –û—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã (backend –ù–ï –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —á—É–∂–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
```

### 7.2 –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SVM ‚Üî cl_mem

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–Ω—É—Ç—Ä–∏ DrvGPU –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ SVM, –∞ –≤–Ω–µ—à–Ω–µ–º—É –∫–æ–¥—É –Ω—É–∂–µ–Ω cl_mem/clBuffer
**–†–µ—à–µ–Ω–∏–µ:**
```cpp
// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è SVM ‚Üí cl_mem (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
cl_mem ConvertSVMToCLMem(void* svm_ptr, size_t size_bytes, cl_context ctx, cl_command_queue queue) {
    cl_mem buffer = clCreateBuffer(ctx, CL_MEM_READ_WRITE, size_bytes, nullptr, &err);
    clEnqueueSVMMemcpy(queue, CL_TRUE, buffer_mapped_ptr, svm_ptr, size_bytes, ...);
    // –∏–ª–∏ —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π host –±—É—Ñ–µ—Ä
    return buffer;
}

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è cl_mem ‚Üí SVM (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
void ConvertCLMemToSVM(cl_mem src, void* svm_dst, size_t size_bytes, cl_command_queue queue) {
    clEnqueueReadBuffer(queue, src, CL_TRUE, 0, size_bytes, temp_host, ...);
    clEnqueueSVMMemcpy(queue, CL_TRUE, svm_dst, temp_host, size_bytes, ...);
}
```

### –ó–∞–¥–∞—á–∏ –≠—Ç–∞–ø–∞ 7:
> **–°–¢–ê–¢–£–°: –í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ ‚Äî –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω, 3 –ø–æ–¥—Ç–µ—Å—Ç–∞ (A/B/C).

- [x] 7.1 –°–æ–∑–¥–∞—Ç—å modules/fft_maxima/tests/test_external_context_fft.hpp ‚úÖ
  - [x] –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ (~500 —Å—Ç—Ä–æ–∫)
  - [x] namespace test_external_context_fft, —Ñ—É–Ω–∫—Ü–∏—è inline int run()
- [x] 7.2 –ò–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ‚úÖ
  - [x] 7.2.1 –ö–ª–∞—Å—Å ExternalOpenCLContext ‚Äî —ç–º—É–ª—è—Ü–∏—è "—á—É–∂–æ–≥–æ" OpenCL –∫–æ–¥–∞
  - [x] 7.2.2 –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ GPU (cl_mem):
    - GenerateBeamsData() ‚Üí clCreateBuffer + clEnqueueWriteBuffer
    - –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞: target_bin = beam * 15 + 5
  - [x] 7.2.3 –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SVM ‚Üí cl_mem –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (TestC)
- [x] 7.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å DrvGPU: ‚úÖ
  - [x] 7.3.1 OpenCLBackendExternal::InitializeFromExternalContext(ctx, dev, queue)
  - [x] 7.3.2 –ü—Ä–∏–Ω—è—Ç—å cl_mem –¥–∞–Ω–Ω—ã–µ –∏–∑ —á—É–∂–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  - [x] 7.3.3 –°–æ–∑–¥–∞—Ç—å AntennaFFTProcMax —Å external backend
  - [x] 7.3.4 –í—ã–ø–æ–ª–Ω–∏—Ç—å ProcessNew()
- [x] 7.4 –¢—Ä–∏ –ø–æ–¥—Ç–µ—Å—Ç–∞ –≤—ã–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: ‚úÖ
  - [x] 7.4.1 **TestA:** cl_mem input ‚Üí CPU output (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
  - [x] 7.4.2 **TestB:** ExternalCLBufferAdapter input ‚Üí CPU output (—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä)
  - [x] 7.4.3 **TestC:** SVM ‚Üí cl_mem –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ‚Üí FFT ‚Üí CPU (–∫—Ä–æ—Å—Å-–º–æ–¥–µ–ª—å –ø–∞–º—è—Ç–∏)
- [~] 7.5 –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ AntennaFFTProcMax:
  - [ ] 7.5.1 GetResultAsCLMem() ‚Üí cl_mem ‚Äî **–±—É–¥—É—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ API**
  - [ ] 7.5.2 GetResultAsCLBuffer() ‚Üí ExternalCLBufferAdapter ‚Äî **–±—É–¥—É—â–µ–µ**
  - [x] 7.5.3 ConvertSVMToCLMem() ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Ç–µ—Å—Ç–µ (TestC) ‚úÖ
- [x] 7.6 –ü—Ä–æ–≤–µ—Ä–∫–∏: ‚úÖ
  - [x] 7.6.1 CPU —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (—á–∞—Å—Ç–æ—Ç–∞ –Ω–∞–π–¥–µ–Ω–∞, tolerance ¬±2)
  - [x] 7.6.2 cl_mem –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–∏—Ç–∞—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
  - [x] 7.6.3 –ß—É–∂–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ù–ï –ø–æ–≤—Ä–µ–∂–¥—ë–Ω –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã DrvGPU (owns_resources_=false)
  - [x] 7.6.4 –†–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ clGetContextInfo)
- [ ] 7.7 –û–±–Ω–æ–≤–∏—Ç—å main.cpp –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ç–µ—Å—Ç–∞
- [ ] 7.8 –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| # | –≠—Ç–∞–ø | –ü—É–Ω–∫—Ç plan2 | –°—Ç–∞—Ç—É—Å | –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---|------|-------------|--------|----------------|------------|
| 1 | –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è DrvGPU | –ø.2 | üü° —á–∞—Å—Ç–∏—á–Ω–æ | 1 (i_data_sink) | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–æ |
| 2 | configGPU.json | –ø.4 | ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | 4 | config_types, gpu_config, json.hpp |
| 3 | Logger/Profiler/Console | –ø.3 | ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | 5 | async_base, profiler, console, service_mgr |
| 4 | fft_maxima vs DrvGPU | –ø.1 | üü° —á–∞—Å—Ç–∏—á–Ω–æ | 1 | FFTPlanCache —Å–æ–∑–¥–∞–Ω |
| 5 | Batch processing | –ø.5 | ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | 3 | batch_manager + cpp + fft_batch_adapter |
| 6 | –¢–µ—Å—Ç—ã SVM | –ø.6 | ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | 1 | test_fft_svm.hpp |
| 7 | –¢–µ—Å—Ç—ã External Context | –ø.7 | ‚úÖ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ | 1 | test_external_context_fft.hpp |
| | | | **–ò–¢–û–ì–û** | **16 —Ñ–∞–π–ª–æ–≤** | + 1 —Ñ–∞–π–ª –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω (config_logger.cpp) |

---

## –û–¶–ï–ù–ö–ê –¢–†–£–î–û–ó–ê–¢–†–ê–¢

| –≠—Ç–∞–ø | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ (—á–∞—Å—ã) | –†–∏—Å–∫–∏ |
|------|-----------|---------------|-------|
| 1 | –°—Ä–µ–¥–Ω—è—è | 4-6 | –°–ª–æ–º–∞—Ç—å #include –ø—É—Ç–∏ |
| 2 | –ù–∏–∑–∫–∞—è | 2-3 | nlohmann/json –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| 3 | –í–´–°–û–ö–ê–Ø | 8-12 | –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å, deadlock |
| 4 | –°—Ä–µ–¥–Ω—è—è | 3-5 | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å API |
| 5 | –°—Ä–µ–¥–Ω—è—è | 3-4 | –†–∞—Å—á—ë—Ç –ø–∞–º—è—Ç–∏ |
| 6 | –ù–∏–∑–∫–∞—è | 2-3 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ |
| 7 | –°—Ä–µ–¥–Ω—è—è | 3-5 | SVM‚Üîcl_mem –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è |
| **–ò–¢–û–ì–û** | | **25-38** | |

---

## –ü–û–†–Ø–î–û–ö –ò–°–ü–û–õ–ù–ï–ù–ò–Ø

```
–≠—Ç–∞–ø 1 ‚îÄ‚Üí –≠—Ç–∞–ø 2 ‚îÄ‚Üí –≠—Ç–∞–ø 3 ‚îÄ‚Üí –≠—Ç–∞–ø 4 ‚îÄ‚Üí –≠—Ç–∞–ø 5 ‚îÄ‚Üí –≠—Ç–∞–ø 6 ‚îÄ‚Üí –≠—Ç–∞–ø 7
  ‚îÇ           ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
  ‚îÇ           ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
  ‚îî‚îÄ‚îÄ BUILD   ‚îî‚îÄ‚îÄ BUILD  ‚îî‚îÄ‚îÄ BUILD  ‚îî‚îÄ‚îÄ BUILD  ‚îî‚îÄ‚îÄ BUILD  ‚îî‚îÄ‚îÄ BUILD ‚îî‚îÄ‚îÄ BUILD + FULL TEST
  ‚îî‚îÄ‚îÄ TEST    ‚îî‚îÄ‚îÄ TEST   ‚îî‚îÄ‚îÄ TEST   ‚îî‚îÄ‚îÄ TEST   ‚îî‚îÄ‚îÄ TEST   ‚îî‚îÄ‚îÄ TEST  ‚îî‚îÄ‚îÄ FINAL
```

–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å–±–æ—Ä–∫–æ–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
–ü—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ.

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê

1. **–®–∞–≥ –∑–∞ —à–∞–≥–æ–º:** –ü—Ä–æ—á–∏—Ç–∞—Ç—å ‚Üí –ü–æ–Ω—è—Ç—å ‚Üí –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:** –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –í–ï–ó–î–ï (–Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Redirect-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
4. **Thread-safety:** –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã thread-safe (mutex + condition_variable)
5. **RAII:** –í—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —á–µ—Ä–µ–∑ RAII
6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø ‚Üí BUILD ‚Üí TEST ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
7. **Sequential thinking:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP sequential-thinking –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
8. **–ù–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ:** –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

---

---

## –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´ (—Å–µ—Å—Å–∏—è 2026-02-07)

### DrvGPU ‚Äî –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `interface/i_data_sink.hpp` | IDataSink –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è + DataRecord struct |
| `services/async_service_base.hpp` | Template<TMessage> –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å async —Å–µ—Ä–≤–∏—Å–æ–≤ |
| `services/console_output.hpp` | ConsoleOutput singleton (AsyncServiceBase) |
| `services/gpu_profiler.hpp` | GPUProfiler singleton (AsyncServiceBase) |
| `services/batch_manager.hpp` | BatchManager (–Ω–µ singleton) |
| `services/batch_manager.cpp` | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è BatchManager |
| `services/service_manager.hpp` | ServiceManager ‚Äî lifecycle –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |
| `config/config_types.hpp` | GPUConfigEntry struct —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏ |
| `config/gpu_config.hpp` | GPUConfig singleton (header) |
| `config/gpu_config.cpp` | GPUConfig singleton (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è) |
| `third_party/nlohmann/json.hpp` | nlohmann/json (header-only) |

### DrvGPU ‚Äî –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `common/config_logger.cpp` | –î–æ–±–∞–≤–ª–µ–Ω—ã GetLogFilePathForGPU() –∏ CreateLogDirectoryForGPU() |

### modules/fft_maxima ‚Äî –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `include/fft_plan_cache.hpp` | –ö–µ—à clFFT –ø–ª–∞–Ω–æ–≤ –ø–æ (nFFT, batch_size) |
| `include/fft_batch_adapter.hpp` | –ê–¥–∞–ø—Ç–µ—Ä AntennaFFT ‚Üí BatchManager |
| `tests/test_fft_svm.hpp` | –¢–µ—Å—Ç: CPU ‚Üí SVM ‚Üí FFT + maxima |
| `tests/test_external_context_fft.hpp` | –¢–µ—Å—Ç: External context ‚Üí FFT (3 –ø–æ–¥—Ç–µ—Å—Ç–∞) |

---

## –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò (—Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Å—Å–∏–∏)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 ‚Äî –°–±–æ—Ä–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- [ ] –û–±–Ω–æ–≤–∏—Ç—å CMakeLists.txt (DrvGPU + modules)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å main.cpp –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ç–µ—Å—Ç–æ–≤ test_fft_svm –∏ test_external_context_fft
- [ ] –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 ‚Äî –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Logger:
- [ ] DefaultLogger ‚Üí –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç AsyncServiceBase<LogMessage>
- [ ] Logger —Ñ–∞—Å–∞–¥ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å gpu_id API
- [ ] –ú–∞–∫—Ä–æ—Å—ã DRVGPU_LOG_*_GPU()

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 ‚Äî –ì–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è fft_maxima:
- [ ] AntennaFFTProcMax ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FFTPlanCache
- [ ] AntennaFFTProcMax ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPUProfiler::Record()
- [ ] FFTLogger ‚Üí –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ DrvGPU Logger
- [ ] clCreateBuffer ‚Üí MemoryManager (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 ‚Äî –§–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–≠—Ç–∞–ø 1):
- [ ] –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ common/ –≤ interface/, logger/, src/
- [ ] Redirect-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö #include –ø—É—Ç–µ–π

---

*–°–æ–∑–¥–∞–Ω: 2026-02-07*
*–û–±–Ω–æ–≤–ª—ë–Ω: 2026-02-07 (—Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω—ã)*
*–ê–≤—Ç–æ—Ä: –ö–æ–¥–æ (AI Assistant)*
*–ü—Ä–æ–µ–∫—Ç: LCH-Farrow1 / GPUWorkLib*
*–î–ª—è: –ê–ª–µ–∫—Å*
