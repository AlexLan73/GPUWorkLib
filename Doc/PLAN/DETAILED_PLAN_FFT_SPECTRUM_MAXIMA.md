# üìã –ü–û–î–†–û–ë–ù–´–ô –ü–õ–ê–ù: FFT Spectrum Maxima Finder
**–ó–∞–¥–∞—á–∞**: –ù–∞–π—Ç–∏ –º–∞–∫—Å–∏–º—É–º —Å–ø–µ–∫—Ç—Ä–∞ –ø–æ—Å–ª–µ FFT –∏ –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é
**–ü—Ä–æ–µ–∫—Ç**: GPUWorkLib/modules/fft_maxima
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2026-02-06
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**: –ö–æ–¥–æ (AI Assistant)

---

## üéØ –¶–ï–õ–¨ –ü–†–û–ï–ö–¢–ê
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞ —Å–ø–µ–∫—Ç—Ä–∞ –ø–æ—Å–ª–µ FFT —Å –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π –≤–µ—Ä—à–∏–Ω—ã.
- –†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (100MB - 8GB)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ clFFT callbacks –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DrvGPU —Å SVM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞–º—è—Ç—å—é
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ GPU

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **Pre-callback** (`GetPreCallbackSource32()`) - –≤—Å—Ç—Ä–æ–µ–Ω –≤ FFT
   - Padding –¥–æ 2^n
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –≤ repeat_count —Ä–∞–∑
   - –ü—Ä–∏–º–µ—Ä: 1000 ‚Üí 1024 ‚Üí 2048 (repeat=2)

2. **FFT** —Å pre-callback - clFFT –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

3. **Post-kernel** (`GetPostKernelSource()`) - –û–¢–î–ï–õ–¨–ù–´–ô kernel
   - –ü–æ–∏—Å–∫ –º–∞–∫—Å–∏–º—É–º–∞ –≤ –∫—Ä–∞–µ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö
   - –ü–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
   - –í—ã–≤–æ–¥ 4 —Å—Ç—Ä—É–∫—Ç—É—Ä MaxValue –Ω–∞ –∞–Ω—Ç–µ–Ω—É
   - ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –û–¢–î–ï–õ–¨–ù–´–ú, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
     * `__local` memory –¥–ª—è —Ä–µ–¥—É–∫—Ü–∏–∏
     * `barrier(CLK_LOCAL_MEM_FENCE)` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
     * –†–µ–¥—É–∫—Ü–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞

### –ü–æ—á–µ–º—É Post-kernel –ù–ï callback?
**Post-callback** –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ö–ê–ñ–î–û–ì–û —ç–ª–µ–º–µ–Ω—Ç–∞ FFT –æ—Ç–¥–µ–ª—å–Ω–æ ‚Üí –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º—É–º!
**Post-kernel** –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–û–°–õ–ï FFT ‚Üí –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å —Ä–µ–¥—É–∫—Ü–∏—é –∏ –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º—É–º! ‚úÖ

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –í–•–û–î–ù–´–• –î–ê–ù–ù–´–•

```cpp
struct FFTSpectrumParams {
    uint32_t antenna_count;      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω—Ç–µ–Ω (1-256)
    uint32_t n_point;            // –¢–æ—á–µ–∫ –Ω–∞ –∞–Ω—Ç–µ–Ω—É (–¥–æ 1.3–ú)
    uint32_t repeat_count;       // –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞–∑–º–µ—Ä–∞ 2^n (1,2,4,8...)

    // –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    uint32_t nFFT;               // = nextPow2(n_point) * repeat_count
    uint32_t search_range;       // –î–∏–∞–ø–∞–∑–æ–Ω –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞
    float sample_rate;           // –ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (–ì—Ü)
};

struct MaxValue {
    uint32_t index;              // –ò–Ω–¥–µ–∫—Å –≤ FFT
    float real;                  // Re
    float imag;                  // Im
    float magnitude;             // |magnitude|
    float phase;                 // –§–∞–∑–∞ (–≥—Ä–∞–¥—É—Å—ã)
    float freq_offset;           // –ü–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –ø–æ–ø—Ä–∞–≤–∫–∞ [-0.5, 0.5]
    float refined_frequency;     // –£—Ç–æ—á–Ω—ë–Ω–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (–ì—Ü)
    uint32_t pad;                // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
};

// –†–µ–∑—É–ª—å—Ç–∞—Ç: antenna_count √ó 4 —Å—Ç—Ä—É–∫—Ç—É—Ä—ã MaxValue
// [0] - –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
// [1] - –ª–µ–≤–∞—è —Ç–æ—á–∫–∞ (index-1)
// [2] - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ (–º–∞–∫—Å–∏–º—É–º)
// [3] - –ø—Ä–∞–≤–∞—è —Ç–æ—á–∫–∞ (index+1)
```

---

## üìù –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –†–ê–ë–û–¢–´

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 1: –ò–ó–£–ß–ï–ù–ò–ï (Research)
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 1.1. –ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É DrvGPU ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `/home/alex/C++/GPUWorkLib/DrvGPU/include`
- [ ] –ù–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IBackend`
- [ ] –ü–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- [ ] –ù–∞–π—Ç–∏ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±—É—Ñ–µ—Ä–æ–≤

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `DrvGPU/include/IBackend.h` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- `DrvGPU/include/...` (–æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏)

---

### 1.2. –ò–∑—É—á–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å SVM ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ù–∞–π—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SVM –≤ `DrvGPU/tests`
- [ ] –ü–æ–Ω—è—Ç—å –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å SVM –±—É—Ñ–µ—Ä—ã
- [ ] –ü–æ–Ω—è—Ç—å –∫–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å SVM pointer –≤ kernel
- [ ] –í—ã—è—Å–Ω–∏—Ç—å –æ—Ç–ª–∏—á–∏—è SVM –æ—Ç cl_mem

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `DrvGPU/tests/*svm*.cpp` (–ø—Ä–∏–º–µ—Ä—ã —Å SVM)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `Doc/DrvGPU`

---

### 1.3. –ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é DrvGPU ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å –æ–±—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤ `/home/alex/C++/GPUWorkLib/Doc/DrvGPU`
- [ ] –ù–∞–π—Ç–∏ API reference
- [ ] –ü–æ–Ω—è—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–∞–º—è—Ç—å—é
- [ ] –ù–∞–π—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è FFT –ø–ª–∞–Ω–æ–≤

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- `Doc/DrvGPU/*.md` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- `Doc/DrvGPU/API.md` (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

### 1.4. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å antenna_fft_core ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å `modules/fft_maxima/include/antenna_fft_core.h`
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å `modules/fft_maxima/src/antenna_fft_core.cpp`
- [ ] –ü–æ–Ω—è—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏ –µ–≥–æ –º–µ—Ç–æ–¥—ã
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω—É–∂–Ω–æ –ª–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å

**–í–æ–ø—Ä–æ—Å**: –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `AntennaFFTCore` –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∫–ª–∞—Å—Å?

---

### 1.5. –ò–∑—É—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ kernels ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~15 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å `GetPreCallbackSource32()` (—Å—Ç—Ä–æ–∫–∏ 417-447)
- [ ] –ü–µ—Ä–µ—á–∏—Ç–∞—Ç—å `GetPostKernelSource()` (—Å—Ç—Ä–æ–∫–∏ 152-366)
- [ ] –ü–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É PreCallbackUserData (32 –±–∞–π—Ç–∞)
- [ ] –ü–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤ post_kernel

**–§–∞–π–ª—ã**:
- `modules/fft_maxima/include/kernels/fft_kernel_sources.hpp`

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 2: –ü–†–û–ï–ö–¢–ò–†–û–í–ê–ù–ò–ï (Design)
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 2.1. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `FFTSpectrumParams`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `nextPow2(n)` –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è nFFT
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤—ã—á–∏—Å–ª–µ–Ω–∏—è search_range

**–§–æ—Ä–º—É–ª–∞ nFFT**:
```
base_fft = nextPow2(n_point)
nFFT = base_fft * repeat_count
```

**–ü—Ä–∏–º–µ—Ä**:
- n_point = 1000
- repeat_count = 2
- base_fft = 1024
- nFFT = 2048

---

### 2.2. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –í—ã–±—Ä–∞—Ç—å –∏–º—è –∫–ª–∞—Å—Å–∞: `FFTSpectrumMaxima` –∏–ª–∏ `SpectrumPeakFinder`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
  - `Initialize()` - —Å–æ–∑–¥–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ –∏ –ø–ª–∞–Ω–∞
  - `Process(data)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  - `GetResults()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è:
  - `drv_gpu_lib::IBackend* backend_`
  - `cl_context context_`
  - `cl_command_queue queue_`
  - `clfftPlanHandle plan_handle_`
  - –ë—É—Ñ–µ—Ä—ã –∏ userdata
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω—É–∂–µ–Ω –ª–∏ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ù–∞–∑–≤–∞—Ç—å –∫–ª–∞—Å—Å `SpectrumMaximaFinder`

---

### 2.3. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±—É—Ñ–µ—Ä—ã –∏ –ø–∞–º—è—Ç—å ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å layout pre-callback userdata:
  ```
  [32 bytes PreCallbackUserData][antenna_count * n_point * sizeof(complex<float>) input_data]
  ```
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å FFT –±—É—Ñ–µ—Ä—ã:
  ```
  fft_input:  antenna_count * nFFT * sizeof(complex<float>)
  fft_output: antenna_count * nFFT * sizeof(complex<float>)
  ```
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å output –±—É—Ñ–µ—Ä:
  ```
  maxima_output: antenna_count * 4 * sizeof(MaxValue)
  ```
- [ ] –†–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ SVM –∏–ª–∏ cl_mem

**–í–æ–ø—Ä–æ—Å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SVM –¥–ª—è –≤—Å–µ—Ö –±—É—Ñ–µ—Ä–æ–≤ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è input_data?

---

### 2.4. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º padding ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~15 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –û–ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º padding –≤ pre-callback
- [ ] –û–ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º repeat_count
- [ ] –ü—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
1. –ß–∏—Ç–∞–µ–º n_point —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ input_data
2. –î–æ–ø–æ–ª–Ω—è–µ–º –Ω—É–ª—è–º–∏ –¥–æ base_fft = nextPow2(n_point)
3. –î–æ–ø–æ–ª–Ω—è–µ–º –Ω—É–ª—è–º–∏ –¥–æ nFFT = base_fft * repeat_count

**–ü—Ä–∏–º–µ—Ä**:
- Input: 1000 —Ç–æ—á–µ–∫
- –ü–æ—Å–ª–µ padding: [1000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤][24 –Ω—É–ª—è] = 1024
- –ü–æ—Å–ª–µ repeat (√ó2): [1024 —ç–ª–µ–º–µ–Ω—Ç–∞][1024 –Ω—É–ª—è] = 2048

---

### 2.5. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ post-kernel ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è `clEnqueueNDRangeKernel`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å global_size –∏ local_size
- [ ] –ü–æ–Ω—è—Ç—å –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ kernel

**Post-kernel –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
```cpp
__kernel void post_kernel(
    __global const float2* fft_output,     // FFT —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    __global MaxValue* maxima_output,      // –í—ã—Ö–æ–¥–Ω–æ–π –±—É—Ñ–µ—Ä
    uint beam_count,                       // = antenna_count
    uint nFFT,
    uint search_range,
    float sample_rate
)
```

**NDRange**:
- `global_size = [antenna_count * local_size]`
- `local_size = 256` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 3: –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø (Implementation)
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 3.1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –∫–ª–∞—Å—Å–∞ ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~10 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ–∑–¥–∞—Ç—å `modules/fft_maxima/include/spectrum_maxima_finder.h`
- [ ] –°–æ–∑–¥–∞—Ç—å `modules/fft_maxima/src/spectrum_maxima_finder.cpp`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ include
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å namespace

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ .h**:
```cpp
#pragma once
#include <complex>
#include <vector>
#include <CL/cl.h>
#include <clFFT.h>
#include "drv_gpu_lib/IBackend.h"

namespace antenna_fft {

struct FFTSpectrumParams { ... };
struct MaxValue { ... };

class SpectrumMaximaFinder {
public:
    SpectrumMaximaFinder(const FFTSpectrumParams& params,
                         drv_gpu_lib::IBackend* backend);
    ~SpectrumMaximaFinder();

    void Initialize();
    std::vector<MaxValue> Process(const std::vector<std::complex<float>>& data);

private:
    // ...
};

} // namespace antenna_fft
```

---

### 3.2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- [ ] –í—ã—á–∏—Å–ª–∏—Ç—å nFFT = nextPow2(n_point) * repeat_count
- [ ] –í—ã—á–∏—Å–ª–∏—Ç—å search_range (–Ω–∞–ø—Ä–∏–º–µ—Ä, nFFT/4 –∏–ª–∏ –∑–∞–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- [ ] –ü–æ–ª—É—á–∏—Ç—å context –∏ queue –∏–∑ backend
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å clFFT (clfftSetup)

**–ö–æ–¥**:
```cpp
SpectrumMaximaFinder::SpectrumMaximaFinder(
    const FFTSpectrumParams& params,
    drv_gpu_lib::IBackend* backend)
    : params_(params), backend_(backend) {

    // –í—ã—á–∏—Å–ª—è–µ–º nFFT
    uint32_t base_fft = nextPow2(params_.n_point);
    params_.nFFT = base_fft * params_.repeat_count;

    // –í—ã—á–∏—Å–ª—è–µ–º search_range (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é nFFT/4)
    params_.search_range = params_.nFFT / 4;

    // –ü–æ–ª—É—á–∞–µ–º OpenCL –∫–æ–Ω—Ç–µ–∫—Å—Ç
    context_ = backend_->getContext();
    queue_ = backend_->getQueue();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è clFFT
    clfftSetupData fftSetup;
    clfftInitSetupData(&fftSetup);
    clfftSetup(&fftSetup);
}
```

---

### 3.3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Initialize() ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~60 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ–∑–¥–∞—Ç—å pre-callback userdata –±—É—Ñ–µ—Ä (SVM –∏–ª–∏ cl_mem)
- [ ] –ó–∞–ø–∏—Å–∞—Ç—å PreCallbackUserData (32 –±–∞–π—Ç–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å FFT input/output –±—É—Ñ–µ—Ä—ã
- [ ] –°–æ–∑–¥–∞—Ç—å maxima_output –±—É—Ñ–µ—Ä
- [ ] –°–æ–∑–¥–∞—Ç—å FFT –ø–ª–∞–Ω (clfftCreateDefaultPlan)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–Ω (precision, layout, batch size, distance)
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å pre-callback (clfftSetPlanCallback)
- [ ] –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å post-kernel (clCreateProgramWithSource)
- [ ] Bake FFT –ø–ª–∞–Ω (clfftBakePlan)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏**:
1. **Pre-callback userdata**:
```cpp
struct PreCallbackUserData {
    uint32_t beam_count;
    uint32_t count_points;
    uint32_t nFFT;
    uint32_t padding1;
    uint32_t padding2;
    uint32_t padding3;
    uint32_t padding4;
    uint32_t padding5;
}; // 32 bytes

size_t userdata_size = 32 + antenna_count * n_point * sizeof(complex<float>);
pre_callback_userdata_ = clCreateBuffer(context_, CL_MEM_READ_WRITE,
                                         userdata_size, nullptr, &err);
```

2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è pre-callback**:
```cpp
const char* pre_callback_source = kernels::GetPreCallbackSource32();
status = clfftSetPlanCallback(plan_handle_, "prepareDataPre",
                              pre_callback_source, 0,
                              PRECALLBACK, &pre_callback_userdata_, 1);
```

3. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è post-kernel**:
```cpp
const char* post_kernel_source = kernels::GetPostKernelSource();
post_program_ = clCreateProgramWithSource(context_, 1,
                                          &post_kernel_source, nullptr, &err);
clBuildProgram(post_program_, 0, nullptr, nullptr, nullptr, nullptr);
post_kernel_ = clCreateKernel(post_program_, "post_kernel", &err);
```

---

### 3.4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Process() ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~60 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ pre_callback_userdata (offset 32)
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å FFT —Å pre-callback (clfftEnqueueTransform)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã post-kernel (clSetKernelArg)
- [ ] –í—ã–∑–≤–∞—Ç—å post-kernel (clEnqueueNDRangeKernel)
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ maxima_output
- [ ] –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ö–æ–¥**:
```cpp
std::vector<MaxValue> SpectrumMaximaFinder::Process(
    const std::vector<std::complex<float>>& data) {

    // 1. –ö–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ userdata (–ø–æ—Å–ª–µ 32 –±–∞–π—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
    size_t data_size = data.size() * sizeof(std::complex<float>);
    clEnqueueWriteBuffer(queue_, pre_callback_userdata_, CL_TRUE,
                        32, data_size, data.data(), 0, nullptr, nullptr);

    // 2. –í—ã–ø–æ–ª–Ω—è–µ–º FFT —Å pre-callback
    cl_event fft_event;
    clfftEnqueueTransform(plan_handle_, CLFFT_FORWARD, 1, &queue_,
                         0, nullptr, &fft_event,
                         &fft_input_, &fft_output_, nullptr);

    // 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã post-kernel
    clSetKernelArg(post_kernel_, 0, sizeof(cl_mem), &fft_output_);
    clSetKernelArg(post_kernel_, 1, sizeof(cl_mem), &maxima_output_);
    clSetKernelArg(post_kernel_, 2, sizeof(uint32_t), &params_.antenna_count);
    clSetKernelArg(post_kernel_, 3, sizeof(uint32_t), &params_.nFFT);
    clSetKernelArg(post_kernel_, 4, sizeof(uint32_t), &params_.search_range);
    clSetKernelArg(post_kernel_, 5, sizeof(float), &params_.sample_rate);

    // 4. –ó–∞–ø—É—Å–∫–∞–µ–º post-kernel
    size_t global_size = params_.antenna_count * 256;
    size_t local_size = 256;
    cl_event post_event;
    clEnqueueNDRangeKernel(queue_, post_kernel_, 1, nullptr,
                          &global_size, &local_size,
                          1, &fft_event, &post_event);

    // 5. –ß–∏—Ç–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    std::vector<MaxValue> results(params_.antenna_count * 4);
    clEnqueueReadBuffer(queue_, maxima_output_, CL_TRUE, 0,
                       results.size() * sizeof(MaxValue),
                       results.data(), 1, &post_event, nullptr);

    clReleaseEvent(fft_event);
    clReleaseEvent(post_event);

    return results;
}
```

---

### 3.5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~15 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –û—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—Å–µ cl_mem –±—É—Ñ–µ—Ä—ã
- [ ] –û—Å–≤–æ–±–æ–¥–∏—Ç—å post-kernel –∏ program
- [ ] –û—Å–≤–æ–±–æ–¥–∏—Ç—å FFT –ø–ª–∞–Ω (clfftDestroyPlan)
- [ ] –û—Å–≤–æ–±–æ–¥–∏—Ç—å clFFT (clfftTeardown)

**–ö–æ–¥**:
```cpp
SpectrumMaximaFinder::~SpectrumMaximaFinder() {
    if (pre_callback_userdata_) clReleaseMemObject(pre_callback_userdata_);
    if (fft_input_) clReleaseMemObject(fft_input_);
    if (fft_output_) clReleaseMemObject(fft_output_);
    if (maxima_output_) clReleaseMemObject(maxima_output_);
    if (post_kernel_) clReleaseKernel(post_kernel_);
    if (post_program_) clReleaseProgram(post_program_);
    if (plan_handle_) clfftDestroyPlan(&plan_handle_);
    clfftTeardown();
}
```

---

### 3.6. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `ProfileEvent(cl_event, name)`
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è Host‚ÜíGPU
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è FFT execution
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è post-kernel execution
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è GPU‚ÜíHost
- [ ] –í—ã–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å

**–ö–æ–¥**:
```cpp
double SpectrumMaximaFinder::ProfileEvent(cl_event event, const char* name) {
    cl_ulong start, end;
    clGetEventProfilingInfo(event, CL_PROFILING_COMMAND_START,
                           sizeof(cl_ulong), &start, nullptr);
    clGetEventProfilingInfo(event, CL_PROFILING_COMMAND_END,
                           sizeof(cl_ulong), &end, nullptr);
    double time_ms = (end - start) / 1e6;
    std::cout << name << ": " << time_ms << " ms\n";
    return time_ms;
}
```

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –°–æ–∑–¥–∞—Ç—å queue —Å `CL_QUEUE_PROFILING_ENABLE`!

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 4: –¢–ï–°–¢–´ (Testing)
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 4.1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `modules/fft_maxima/tests/test_spectrum_maxima.cpp`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é DrvGPU backend
- [ ] –°–æ–∑–¥–∞—Ç—å main() —Ñ—É–Ω–∫—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ main()**:
```cpp
int main() {
    // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DrvGPU backend
    auto backend = drv_gpu_lib::CreateBackend();
    backend->Initialize();

    // 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞
    FFTSpectrumParams params;
    params.antenna_count = 5;
    params.n_point = 1000;
    params.repeat_count = 2;
    params.sample_rate = 1000.0f;

    // 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
    SpectrumMaximaFinder finder(params, backend);
    finder.Initialize();

    // 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    auto data = GenerateTestData(params);

    // 5. –û–±—Ä–∞–±–æ—Ç–∫–∞
    auto results = finder.Process(data);

    // 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    ValidateResults(results, params);

    return 0;
}
```

---

### 4.2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `GenerateTestData()`
- [ ] –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—É—Å–æ–∏–¥—ã –¥–ª—è 5 –∞–Ω—Ç–µ–Ω
- [ ] –§–æ—Ä–º—É–ª–∞: `sin(2œÄ * freq * t)`, –≥–¥–µ `freq = 2.5 * (antenna_id + 1)`
- [ ] –°–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–æ–º `antenna_count * n_point`

**–ö–æ–¥**:
```cpp
std::vector<std::complex<float>> GenerateTestData(const FFTSpectrumParams& params) {
    std::vector<std::complex<float>> data(params.antenna_count * params.n_point);

    for (uint32_t antenna = 0; antenna < params.antenna_count; ++antenna) {
        float freq = 2.5f * (antenna + 1); // 2.5, 5.0, 7.5, 10.0, 12.5 Hz

        for (uint32_t t = 0; t < params.n_point; ++t) {
            float phase = 2.0f * M_PI * freq * t / params.sample_rate;
            float value = std::sin(phase);

            size_t idx = antenna * params.n_point + t;
            data[idx] = std::complex<float>(value, 0.0f);
        }
    }

    return data;
}
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —á–∞—Å—Ç–æ—Ç—ã**:
- –ê–Ω—Ç–µ–Ω–∞ 0: 2.5 Hz
- –ê–Ω—Ç–µ–Ω–∞ 1: 5.0 Hz
- –ê–Ω—Ç–µ–Ω–∞ 2: 7.5 Hz
- –ê–Ω—Ç–µ–Ω–∞ 3: 10.0 Hz
- –ê–Ω—Ç–µ–Ω–∞ 4: 12.5 Hz

---

### 4.3. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –í—ã—á–∏—Å–ª–∏—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –∞–Ω—Ç–µ–Ω—ã
- [ ] –§–æ—Ä–º—É–ª–∞: `bin_index = freq * nFFT / sample_rate`
- [ ] –£—á–µ—Å—Ç—å padding –∏ repeat_count

**–†–∞—Å—á—ë—Ç**:
- n_point = 1000
- repeat_count = 2
- base_fft = 1024
- nFFT = 2048
- sample_rate = 1000 Hz

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã**:
- –ê–Ω—Ç–µ–Ω–∞ 0 (2.5 Hz): bin = 2.5 * 2048 / 1000 = 5.12 ‚Üí **bin 5**
- –ê–Ω—Ç–µ–Ω–∞ 1 (5.0 Hz): bin = 5.0 * 2048 / 1000 = 10.24 ‚Üí **bin 10**
- –ê–Ω—Ç–µ–Ω–∞ 2 (7.5 Hz): bin = 7.5 * 2048 / 1000 = 15.36 ‚Üí **bin 15**
- –ê–Ω—Ç–µ–Ω–∞ 3 (10.0 Hz): bin = 10.0 * 2048 / 1000 = 20.48 ‚Üí **bin 20**
- –ê–Ω—Ç–µ–Ω–∞ 4 (12.5 Hz): bin = 12.5 * 2048 / 1000 = 25.6 ‚Üí **bin 26**

---

### 4.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `ValidateResults()`
- [ ] –î–ª—è –∫–∞–∂–¥–æ–π –∞–Ω—Ç–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –º–∞–∫—Å–∏–º—É–º–∞
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∏–Ω–¥–µ–∫—Å–æ–º (–¥–æ–ø—É—Å—Ç–∏–º–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å ¬±1 bin)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é (refined_frequency)
- [ ] –í—ã–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: PASS/FAIL –¥–ª—è –∫–∞–∂–¥–æ–π –∞–Ω—Ç–µ–Ω—ã

**–ö–æ–¥**:
```cpp
void ValidateResults(const std::vector<MaxValue>& results,
                     const FFTSpectrumParams& params) {

    const float expected_freqs[] = {2.5f, 5.0f, 7.5f, 10.0f, 12.5f};

    std::cout << "\nüìã –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:\n";
    std::cout << "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

    for (uint32_t antenna = 0; antenna < params.antenna_count; ++antenna) {
        // –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ - –≤ results[antenna*4 + 0]
        const MaxValue& interp = results[antenna * 4 + 0];
        const MaxValue& center = results[antenna * 4 + 2];

        float expected_freq = expected_freqs[antenna];
        float expected_bin = expected_freq * params.nFFT / params.sample_rate;

        float freq_error = std::abs(interp.refined_frequency - expected_freq);
        float bin_error = std::abs((float)center.index - expected_bin);

        std::cout << "–ê–Ω—Ç–µ–Ω–∞ " << antenna << ":\n";
        std::cout << "  –û–∂–∏–¥–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞: " << expected_freq << " Hz\n";
        std::cout << "  –ù–∞–π–¥–µ–Ω–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞: " << interp.refined_frequency << " Hz\n";
        std::cout << "  –û—à–∏–±–∫–∞ —á–∞—Å—Ç–æ—Ç—ã: " << freq_error << " Hz\n";
        std::cout << "  –û–∂–∏–¥–∞–µ–º—ã–π bin: " << expected_bin << "\n";
        std::cout << "  –ù–∞–π–¥–µ–Ω–Ω—ã–π bin: " << center.index << "\n";
        std::cout << "  –û—à–∏–±–∫–∞ bin: " << bin_error << "\n";

        // –ü—Ä–æ–≤–µ—Ä–∫–∞
        bool pass = (bin_error < 1.0f) && (freq_error < 0.5f);
        std::cout << "  –°—Ç–∞—Ç—É—Å: " << (pass ? "‚úÖ PASS" : "‚ùå FAIL") << "\n\n";
    }
}
```

---

### 4.5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –¢–µ—Å—Ç —Å 1 –∞–Ω—Ç–µ–Ω–æ–π
- [ ] –¢–µ—Å—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–Ω—Ç–µ–Ω (256)
- [ ] –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ repeat_count (1, 2, 4, 8)
- [ ] –¢–µ—Å—Ç —Å –≥—Ä–∞–Ω–∏—á–Ω—ã–º —Å–ª—É—á–∞–µ–º (n_point —É–∂–µ —Å—Ç–µ–ø–µ–Ω—å 2)

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 5: –ü–†–û–§–ò–õ–ò–†–û–í–ê–ù–ò–ï –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 5.1. GPU –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~20 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –í–∫–ª—é—á–∏—Ç—å CL_QUEUE_PROFILING_ENABLE –≤ queue
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –¥–ª—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- [ ] –í—ã–≤–µ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥**:
```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
GPU –ü–†–û–§–ò–õ–ò–†–û–í–ê–ù–ò–ï:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Host‚ÜíGPU (input data):     0.15 ms
FFT Execution (with pre):  2.34 ms
Post-kernel (find max):    0.08 ms
GPU‚ÜíHost (results):        0.05 ms
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL:                     2.62 ms
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

---

### 5.2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~30 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π local_size –¥–ª—è post-kernel (128, 256, 512)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SVM vs cl_mem (—á—Ç–æ –±—ã—Å—Ç—Ä–µ–µ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pinned memory –¥–ª—è Host‚ÜîGPU –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å search_range (–º–æ–∂–Ω–æ –ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å?)

---

### 5.3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~40 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å README.md –¥–ª—è –º–æ–¥—É–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥ (Doxygen style)
- [ ] –ü—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –û–ø–∏—Å–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ README.md**:
```markdown
# FFT Spectrum Maxima Finder

## –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–∏—Å–∫ –º–∞–∫—Å–∏–º—É–º–∞ —Å–ø–µ–∫—Ç—Ä–∞ –ø–æ—Å–ª–µ FFT —Å –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ clFFT pre-callback –¥–ª—è padding –∏ repeat
- –û—Ç–¥–µ–ª—å–Ω—ã–π post-kernel –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞
- –†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–¥–æ 8 GB)
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ GPU

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
...

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
...

## –ê–ª–≥–æ—Ä–∏—Ç–º
...
```

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –≠–¢–ê–ü 6: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –ü–†–û–ï–ö–¢
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### 6.1. –û–±–Ω–æ–≤–∏—Ç—å CMakeLists.txt ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~15 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ `modules/fft_maxima/CMakeLists.txt`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (DrvGPU, clFFT)
- [ ] –°–æ–∑–¥–∞—Ç—å executable –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä**:
```cmake
add_library(spectrum_maxima_finder
    src/spectrum_maxima_finder.cpp
)

target_include_directories(spectrum_maxima_finder PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/include
)

target_link_libraries(spectrum_maxima_finder
    drv_gpu_lib
    clFFT
    OpenCL
)

# –¢–µ—Å—Ç—ã
add_executable(test_spectrum_maxima
    tests/test_spectrum_maxima.cpp
)

target_link_libraries(test_spectrum_maxima
    spectrum_maxima_finder
)
```

---

### 6.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~10 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å cmake
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å make
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

```bash
cd /home/alex/C++/GPUWorkLib
mkdir -p build
cd build
cmake ..
make -j$(nproc)
```

---

### 6.3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–í—Ä–µ–º—è**: ~10 –º–∏–Ω
**–ó–∞–¥–∞—á–∏**:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `./test_spectrum_maxima`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

```bash
./build/modules/fft_maxima/test_spectrum_maxima
```

---

## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê
## ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

### –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚è≥
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Pending
**–ó–∞–¥–∞—á–∏**:
- [ ] ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á—ë—Ç–æ–º
- [ ] ‚úÖ –ö–æ–¥ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –±–µ–∑ warnings
- [ ] ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞
- [ ] ‚úÖ –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] ‚úÖ –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ git

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–õ–ê–ù–ê

**–í—Å–µ–≥–æ —ç—Ç–∞–ø–æ–≤**: 6
**–í—Å–µ–≥–æ –ø–æ–¥–∑–∞–¥–∞—á**: ~45
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: ~12-15 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å**:
1. –≠—Ç–∞–ø 1 (–ò–∑—É—á–µ–Ω–∏–µ) ‚Üí 2 —á–∞—Å–∞
2. –≠—Ç–∞–ø 2 (–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Üí 2.5 —á–∞—Å–∞
3. –≠—Ç–∞–ø 3 (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è) ‚Üí 5 —á–∞—Å–æ–≤ ‚ö†Ô∏è **–°–∞–º—ã–π –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π**
4. –≠—Ç–∞–ø 4 (–¢–µ—Å—Ç—ã) ‚Üí 2.5 —á–∞—Å–∞
5. –≠—Ç–∞–ø 5 (–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Üí 1.5 —á–∞—Å–∞
6. –≠—Ç–∞–ø 6 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) ‚Üí 0.5 —á–∞—Å–∞

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

**HIGH PRIORITY**:
- –≠—Ç–∞–ø 1.1-1.4 (–∏–∑—É—á–µ–Ω–∏–µ DrvGPU) ‚ö†Ô∏è
- –≠—Ç–∞–ø 2.2 (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞) ‚ö†Ô∏è
- –≠—Ç–∞–ø 3.3-3.4 (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Initialize –∏ Process) ‚ö†Ô∏è
- –≠—Ç–∞–ø 4.2-4.4 (—Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞) ‚ö†Ô∏è

**MEDIUM PRIORITY**:
- –≠—Ç–∞–ø 2.3 (–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏)
- –≠—Ç–∞–ø 3.6 (–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –≠—Ç–∞–ø 5.1 (GPU –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

**LOW PRIORITY**:
- –≠—Ç–∞–ø 5.2 (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- –≠—Ç–∞–ø 5.3 (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## üìù –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–¢–ö–ò

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–´–ï –ú–û–ú–ï–ù–¢–´:

1. **Post-kernel –î–û–õ–ñ–ï–ù –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º!**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `__local` memory
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `barrier()`
   - –î–µ–ª–∞–µ—Ç —Ä–µ–¥—É–∫—Ü–∏—é –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–∞–∫—Å–∏–º—É–º–∞
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞–∫ post-callback!

2. **Pre-callback userdata layout**:
   - –ü–µ—Ä–≤—ã–µ 32 –±–∞–π—Ç–∞: PreCallbackUserData (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
   - –û—Å—Ç–∞–ª—å–Ω–æ–µ: –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (antenna_count * n_point * 8 bytes)

3. **NDRange –¥–ª—è post-kernel**:
   - global_size = antenna_count √ó local_size
   - local_size = 256 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ö–∞–∂–¥–∞—è work-group –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω—É –∞–Ω—Ç–µ–Ω—É

4. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - Queue –î–û–õ–ñ–ù–ê –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Å CL_QUEUE_PROFILING_ENABLE
   - –ò–Ω–∞—á–µ clGetEventProfilingInfo –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É!

5. **SVM vs cl_mem**:
   - –ù—É–∂–Ω–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±—ã—Å—Ç—Ä–µ–µ
   - SVM –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–æ–±–Ω–µ–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å DrvGPU

---

## üîó –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- **DrvGPU**: `/home/alex/C++/GPUWorkLib/DrvGPU`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `/home/alex/C++/GPUWorkLib/Doc/DrvGPU`
- **–ü—Ä–∏–º–µ—Ä—ã**: `/home/alex/C++/GPUWorkLib/DrvGPU/tests`
- **–†–∞–±–æ—á–∏–π –ø—Ä–æ–µ–∫—Ç**: `/home/alex/C++/OpenCLProd/LOpenCl`
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥**: `/home/alex/C++/GPUWorkLib/modules/fft_maxima`

---

## üöÄ –ì–û–¢–û–í –ö –°–¢–ê–†–¢–£!

**–°—Ç–∞—Ç—É—Å –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**: ‚è≥ Pending
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –≠—Ç–∞–ø 1.1 - –ò–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É DrvGPU

---

*–°–æ–∑–¥–∞–Ω–æ: 2026-02-06*
*–ê–≤—Ç–æ—Ä: –ö–æ–¥–æ (AI Assistant)*
*–î–ª—è: Alex*
*–ü—Ä–æ–µ–∫—Ç: GPUWorkLib - FFT Spectrum Maxima Finder* üíï
